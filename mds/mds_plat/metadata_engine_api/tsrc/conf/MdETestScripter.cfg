#
# Copyright (c) 2008-2009 Nokia Corporation and/or its subsidiary(-ies). 
# All rights reserved.
# This component and the accompanying materials are made available
# under the terms of the License "Eclipse Public License v1.0"
# which accompanies this distribution, and is available
# at the URL "http://www.eclipse.org/legal/epl-v10.html".
#
# Initial Contributors:
# Nokia Corporation - initial contribution.
#
# Contributors:
#
# Description:  Metadata Engine API tests
#

// ---------------------------------------------------------------------------
// Metadata Engine API test cases
// ---------------------------------------------------------------------------

// These should be run in sequential mode if several cases are run at the same
// time! 

[Define]
KErrNotFound -1
KErrGeneral -2
KErrNotSupported -5
KErrArgument -6
KErrCorrupt -20
KErrAccessDenied -21
KErrLocked 	-22
KErrAlreadyExists -11

KErrIncorrectType = -36201

KLast -1;

KById 0
KByUri 1
KByGuid 2
KByIds 3
KByDef 4
KByIndex 5

KAsync 0
KSync 1

KL 0
KLC 1

EFalse 0
ETrue 1

ESession 0
EObjectDef 1
ERelationDef 2
EPropertyDef 3
EEventDef 4
ENamespaceDef 5
EObject 6
ERelation 7
EProperty 8
EEvent 9

ENotifyAdd 1 
ENotifyModify 2
ENotifyRemove 4

ESortDescending 0
ESortAscending 1

// enum TOrderRuleType
EOrderRuleTypeItemID 1
EOrderRuleTypeObjectURI 2
EOrderRuleTypeObjectDef 3
EOrderRuleTypeProperty 4
EOrderRuleTypeCreationTime 5
EOrderRuleTypeUsageCount 6
EOrderRuleTypeSourceURI 7
EOrderRuleTypeParticipantURI 8
EOrderRuleTypeTargetObjectID 9
EOrderRuleTypeEventDef 10
EOrderRuleTypeParameterValue 11
EOrderRuleTypeLeftObjectID 12
EOrderRuleTypeRightObjectID 13
EOrderRuleTypeRelationDef 14

KNoNegate 0
KNegate 1

EOther      0
ECamera     1
EDownloaded 2
ESideLoaded 3
ERecorded   4

ELogicConditionOperatorAnd 1
ELogicConditionOperatorOr 2

EAlbumUser            0
EAlbumUserPredefined  1
EAlbumSystemFavourite 2

[Enddefine]

[Test]
title Observer 1: Add*ObserverL, Remove*ObserverL
create MdETestScripter test
waittestclass test
test AddSchemaObserverL
test RemoveSchemaObserverL
allownextresult KErrNotFound
test RemoveSchemaObserverL
test AddObjectObserverL
test RemoveObjectObserverL
allownextresult KErrNotFound
test RemoveObjectObserverL
test AddObjectObserverWithUriL
test RemoveObjectObserverWithUriL
allownextresult KErrNotFound
test RemoveObjectObserverWithUriL
test AddObjectPresentObserverL
test RemoveObjectPresentObserverL
allownextresult KErrNotFound
test RemoveObjectPresentObserverL
test AddRelationObserverL
test RemoveRelationObserverL
allownextresult KErrNotFound
test RemoveRelationObserverL
test AddRelationItemObserverL
test RemoveRelationItemObserverL
allownextresult KErrNotFound
test RemoveRelationItemObserverL
test AddRelationPresentObserverL
test RemoveRelationPresentObserverL
allownextresult KErrNotFound
test RemoveRelationPresentObserverL
test AddEventObserverL
test RemoveEventObserverL
allownextresult KErrNotFound
test RemoveEventObserverL
delete test
[Endtest]

[Test]
title Schema 1: ImportMetadataL, ExportMetadataL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test ImportMetadataL \Data\MdETestScripterImportMetadata.mde KSync
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_01.mde KSync EFalse EFalse EFalse
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_02.mde KSync EFalse EFalse ETrue
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_03.mde KSync EFalse ETrue  EFalse
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_04.mde KSync EFalse ETrue  ETrue
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_05.mde KSync ETrue  EFalse EFalse
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_06.mde KSync ETrue  EFalse ETrue
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_07.mde KSync ETrue  ETrue  EFalse
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_08.mde KSync ETrue  ETrue  ETrue
test ImportMetadataL \Data\MdETestScripterImportMetadata.mde KAsync
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_11.mde KAsync EFalse EFalse EFalse
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_12.mde KAsync EFalse EFalse ETrue
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_13.mde KAsync EFalse ETrue  EFalse
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_14.mde KAsync EFalse ETrue  ETrue
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_15.mde KAsync ETrue  EFalse EFalse
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_16.mde KAsync ETrue  EFalse ETrue
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_17.mde KAsync ETrue  ETrue  EFalse
test ExportMetadataL defaultNs \Data\MdETestScripterExportMetadata1_18.mde KAsync ETrue  ETrue  ETrue
delete test
[Endtest]

[Test]
title Schema 2: ImportSchemaL, NamespaceDefCountL
create MdETestScripter test
waittestclass test
test ImportSchemaL \Data\MDETestScripterSchema.mde
allowerrorcodes KErrCorrupt
test ImportSchemaL \Data\MdETestScripterSchema2.mde
test NamespaceDefCountL 3
test LoadSchemaL
test EngineSessionL
test GetSchemaVersionL 1 0
delete test
[Endtest]

[Test]
title Schema 3: GetNamespaceDefL, GetDefaultNamespaceDefL, NamespaceDefL, CompareL, NameL, ReadOnlyL
create MdETestScripter test
waittestclass test
test GetNamespaceDefL ns "http:\/\/sw.nokia.com/MdE"
test NameL ENamespaceDef ns "http:\/\/sw.nokia.com/MdE"
test GetDefaultNamespaceDefL defaultNs
test NameL ENamespaceDef defaultNs "http:\/\/sw.nokia.com/MdE"
test NamespaceDefL ns2 ESession 0
test NameL ENamespaceDef ns2 "http:\/\/sw.nokia.com/MdE"
test CompareL ENamespaceDef ns defaultNs 0
test CompareL ENamespaceDef defaultNs ns 0
test ReadOnlyL ENamespaceDef defaultNs EFalse
delete test
[Endtest]

[Test]
title Schema 4: SetObjectToPresentByGuidL
create MdETestScripter test
waittestclass test
allownextresult KErrNotFound
test SetObjectToPresentByGuidL 123 456
delete test
[Endtest]

[Test]
title Definitions 1: AddRelationDefL
create MdETestScripter test
waittestclass test
allowerrorcodes KErrCorrupt
test ImportSchemaL \Data\MdETestScripterSchema2.mde
test GetNamespaceDefL testNs "http:\/\/sw.nokia.com/MdE/TestSchema2"
test AddSchemaObserverL
request ESchemaModified
allowerrorcodes KErrAlreadyExists
test AddRelationDefL testNs TestRelation
wait ESchemaModified
release ESchemaModified
test ResetNamespaceDefArray
test GetNamespaceDefL testNs "http:\/\/sw.nokia.com/MdE/TestSchema2"
test GetRelationDefL relationDef testNs TestRelation
// Relation name must only be characters
allownextresult KErrGeneral
test AddRelationDefL testNs TestRelation1
delete test
[Endtest]

[Test]
title Definitions 2: AddEventDefL
create MdETestScripter test
waittestclass test
allowerrorcodes KErrCorrupt
test ImportSchemaL \Data\MdETestScripterSchema2.mde
test GetNamespaceDefL testNs "http:\/\/sw.nokia.com/MdE/TestSchema2"
test AddSchemaObserverL
request ESchemaModified
allowerrorcodes KErrAlreadyExists
test AddEventDefL testNs TestEvent
wait ESchemaModified
release ESchemaModified
test ResetNamespaceDefArray
test GetNamespaceDefL testNs "http:\/\/sw.nokia.com/MdE/TestSchema2"
test GetEventDefL eventDef testNs TestEvent
// Relation name must only be characters
allownextresult KErrGeneral
test AddEventDefL testNs TestEvent1
delete test
[Endtest]

[Test]
title Definitions 3: GetRelationDefL, RelationDefL, RelationDefCountL, GetEventDefL, EventDefL, EventDefCountL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetRelationDefL relDefContains defaultNs Contains
test GetRelationDefL relDefReplaces defaultNs Replaces
test GetRelationDefL relDefIsVersionOf defaultNs IsVersionOf
test GetRelationDefL relDefRequiresf defaultNs Requires
test GetRelationDefL relDefUses defaultNs Uses
test GetRelationDefL relDefReferences defaultNs References
test GetRelationDefL relDefSummarises defaultNs Summarises
test GetRelationDefL relDefContainsLocation defaultNs ContainsLocation
loop 8
test RelationDefL relDefARRAY_INDEX defaultNs LOOP_COUNTER
endloop
test RelationDefCountL defaultNs 8
test GetEventDefL eventDefCreated defaultNs Created
test GetEventDefL eventDefDeleted defaultNs Deleted
test GetEventDefL eventDefOpened defaultNs Opened
test GetEventDefL eventDefPlayed defaultNs Played
test GetEventDefL eventDefEdited defaultNs Edited
test GetEventDefL eventDefSent defaultNs Sent
test GetEventDefL eventDefReceived defaultNs Received
loop 7
test EventDefL eventDefARRAY_INDEX defaultNs LOOP_COUNTER
endloop
test EventDefCountL defaultNs 7
test NamespaceDefL ns1 ERelationDef relDefContains
test NamespaceDefL ns2 EEventDef eventDefCreated
delete test
[Endtest]

[Test]
title Definitions 4: GetObjectDefL, GetPropertyDefL, ReadOnlyL, MandatoryL, NameL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL objectDefLocation defaultNs Location
test GetObjectDefL objectDefCalendar defaultNs Calendar
test GetObjectDefL objectDefContact defaultNs Contact
test GetObjectDefL objectDefMessage defaultNs Message
test GetObjectDefL objectDefAlbum defaultNs Album
test GetObjectDefL objectDefTag defaultNs Tag
test GetObjectDefL objectDefMediaObject defaultNs MediaObject
test GetObjectDefL objectDefVideo defaultNs Video
test ParentL objectDefVideo objectDefMediaObject
test PropertyDefCountL objectDefVideo 5
test PropertyDefL propDefVideo0 defaultNs objectDefVideo 0
allownextresult KErrArgument
test PropertyDefL propDefErr defaultNs objectDefVideo -1
test GetPropertyDefL videoCreationDatePropDef objectDefVideo CreationDate
test NameL EPropertyDef videoCreationDatePropDef "CreationDate"
test ReadOnlyL EPropertyDef videoCreationDatePropDef EFalse
test MandatoryL videoCreationDatePropDef ETrue
test ObjectDefL EPropertyDef objectDefVideo2 videoCreationDatePropDef
test GetPropertyDefL lastModifiedDatePropDef objectDefVideo LastModifiedDate
test NameL EPropertyDef lastModifiedDatePropDef "LastModifiedDate"
test ReadOnlyL EPropertyDef lastModifiedDatePropDef EFalse
test MandatoryL lastModifiedDatePropDef ETrue
test ObjectDefL EPropertyDef objectDefVideo3 lastModifiedDatePropDef
test GetObjectDefL objectDefImage defaultNs Image
test ParentL objectDefImage objectDefMediaObject
test GetPropertyDefL imageCreationDatePropDef objectDefImage CreationDate
test NameL EPropertyDef imageCreationDatePropDef "CreationDate"
test ReadOnlyL EPropertyDef imageCreationDatePropDef EFalse
test ObjectDefL EPropertyDef objectDefImage2 imageCreationDatePropDef
test MandatoryL imageCreationDatePropDef ETrue
test GetPropertyDefL imageLastModifiedDatePropDef objectDefImage LastModifiedDate
test NameL EPropertyDef imageLastModifiedDatePropDef "LastModifiedDate"
test ReadOnlyL EPropertyDef imageLastModifiedDatePropDef EFalse
test ObjectDefL EPropertyDef objectDefImage3 imageLastModifiedDatePropDef
test MandatoryL imageLastModifiedDatePropDef ETrue
test GetObjectDefL audioObjDef defaultNs Audio
test GetPropertyDefL audioCreationDatePropDef audioObjDef CreationDate
test NameL EPropertyDef audioCreationDatePropDef "CreationDate"
test ReadOnlyL EPropertyDef audioCreationDatePropDef EFalse
test ObjectDefL EPropertyDef audioObjDef2 audioCreationDatePropDef
test MandatoryL audioCreationDatePropDef ETrue
test GetPropertyDefL audioLastModifiedDatePropDef audioObjDef LastModifiedDate
test NameL EPropertyDef audioLastModifiedDatePropDef "LastModifiedDate"
test ReadOnlyL EPropertyDef audioLastModifiedDatePropDef EFalse
test ObjectDefL EPropertyDef audioObjDef3 audioLastModifiedDatePropDef
test MandatoryL audioLastModifiedDatePropDef ETrue
test GetObjectDefL objectDefTrackLog defaultNs TrackLog
test ObjectDefCountL defaultNs 12
test NamespaceDefL ns1 EPropertyDef videoCreationDatePropDef
delete test
[Endtest]

[Test]
title Edit Object 1: NewObjectL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test NewObjectL obj1 videoObjDef KLC
delete test
[Endtest]

[Test]
title Edit Object 2: OpenObjectL, CancelObjectL, OpenForModificationsL, MovePropertiesL, CommitObjectL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test ImportMetadataL \Data\MdETestScripterImportMetadata.mde KSync
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\test2video1.3gp
test OpenForModificationsL obj0 ETrue
test OpenObjectL obj1 obj0 KByUri ENamespaceDef defaultNs
test OpenForModificationsL obj1 ETrue
allownextresult KErrLocked
test OpenObjectL objNone obj1 KByUri ENamespaceDef defaultNs
// objNone does not exist because open failed
test CancelObjectL obj1
test OpenForModificationsL obj1 EFalse
allownextresult KErrAccessDenied
test MovePropertiesL obj0 obj1
test OpenObjectL obj2 obj1 KByUri ENamespaceDef defaultNs
test SetMediaIdL obj2 121212
test CommitObjectL obj2
test OpenObjectL obj3 obj1 KByGuid ENamespaceDef defaultNs
test CommitObjectL obj3
test OpenObjectL obj4 obj1 KById ENamespaceDef defaultNs
test CommitObjectL obj4
test OpenObjectL obj5 obj1 KByUri EObjectDef videoObjDef
test CommitObjectL obj5
test OpenObjectL obj6 obj1 KByGuid EObjectDef videoObjDef
test CommitObjectL obj6
test OpenObjectL obj7 obj1 KById EObjectDef videoObjDef
test SetGuidL EObject obj7 000002 000001
test CommitObjectL obj7
delete test
[Endtest]

[Test]
title Edit Object 3: CommitObjectsL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test ImportMetadataL \Data\MdETestScripterImportMetadata.mde KSync
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\test3video1.3gp
test OpenObjectL obj1 obj0 KByUri ENamespaceDef defaultNs
test SetUriL obj0 e:\testing\data\test3video2.mp4
test OpenObjectL obj2 obj0 KByUri ENamespaceDef defaultNs
// Commit two objects at starting from obj1 which created before obj2
test SetGuidL EObject obj2 000003 000002
test CommitObjectsL obj1 2
delete test
[Endtest]

[Test]
title Edit Object 4: OpenFullObjectL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test ImportMetadataL \Data\MdETestScripterImportMetadata.mde KSync
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\test4video1.3gp
test OpenFullObjectL obj1 obj0 KByUri
allownextresult KErrLocked
test OpenFullObjectL objNone obj0 KByUri
// objNone does not exist because open failed
test CancelObjectL obj1
test OpenFullObjectL obj2 obj1 KByUri
test CommitObjectL obj2
test OpenFullObjectL obj3 obj1 KByGuid
test CommitObjectL obj3
test OpenFullObjectL obj4 obj1 KById
test SetGuidL EObject obj4 000004 000001
test CommitObjectL obj4
delete test
[Endtest]

[Test]
title Edit Object 5: GetObjectL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test ImportMetadataL \Data\MdETestScripterImportMetadata.mde KSync
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\testvideo2.mp4
test GetObjectL obj1 obj0 KByUri EObjectDef videoObjDef
test GetObjectL obj2 obj1 KById EObjectDef videoObjDef
test GetObjectL obj3 obj1 KByGuid EObjectDef videoObjDef
test GetObjectL obj4 obj1 KByUri ENamespaceDef defaultNs
test GetObjectL obj5 obj1 KById ENamespaceDef defaultNs
test GetObjectL obj6 obj1 KByGuid ENamespaceDef defaultNs
delete test
[Endtest]

[Test]
title Edit Object 6: GetFullObjectL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test ImportMetadataL \Data\MdETestScripterImportMetadata.mde KSync
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\testvideo2.mp4
test GetFullObjectL obj1 videoObjDef obj0 KByUri
test GetFullObjectL obj2 videoObjDef obj1 KById
test GetFullObjectL obj3 videoObjDef obj1 KByGuid
delete test
[Endtest]

[Test]
title Edit Object 7: AddObjectL, AddObjectsL, RemoveObjectL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs

// Create four objects.
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creaDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creaDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000007 000001
test NewObjectL obj1 videoObjDef KL
test GetPropertyDefL creaDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creaDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test SetGuidL EObject obj1 000007 000002
test NewObjectL obj2 videoObjDef KL
test GetPropertyDefL creaDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creaDatePropDef2 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20081130:235959.999999
test SetGuidL EObject obj2 000007 000003
test NewObjectL obj3 videoObjDef KL
test GetPropertyDefL creaDatePropDef3 videoObjDef CreationDate
test AddTimePropertyL obj3 creaDatePropDef3 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef3 videoObjDef LastModifiedDate
test AddTimePropertyL obj3 lastModDatePropDef3 20081130:235959.999999
test SetGuidL EObject obj3 000007 000004

// Add the objects to the database, observe the additions and verify the observed results.
test AddObjectObserverL
test AddObjectL obj0
waittestclass test
test VerifyObserverNotificationTypeL ENotifyAdd
test AddObjectsL obj1 3
waittestclass test
test VerifyObserverNotificationTypeL ENotifyAdd
test RemoveObjectObserverL
test VerifyTItemIdsL EObject 0 4

// Remove the objects, observe the removals and verify the observed results.
test AddObjectObserverL
test RemoveObjectL obj0 KById
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
test RemoveObjectL obj1 KById
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
test RemoveObjectL obj2 KById
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
test RemoveObjectL obj3 KById
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
test RemoveObjectObserverL
test VerifyTItemIdsL EObject 0 4

// Final cleanup.
delete test
[Endtest]

[Test]
title Edit Object 8: CheckObjectL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test ImportMetadataL \Data\MdETestScripterImportMetadata.mde KSync
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\testvideo2.mp4
test GetObjectL obj1 obj0 KByUri EObjectDef videoObjDef
test SetUriL obj0 e:\testing\data\testvideo1.3gp
test GetObjectL obj2 obj0 KByUri EObjectDef videoObjDef
test CheckObjectL obj1 KByUri
test CheckObjectL obj1 KById
test CheckObjectL obj1 KByIds 2
delete test
[Endtest]

[Test]
title Edit Object 9: MovePropertiesL, PropertyCountL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test GetPropertyDefL creationDatePropDef videoObjDef CreationDate
test GetPropertyDefL lastModDatePropDef videoObjDef LastModifiedDate
test GetPropertyDefL durationPropDef videoObjDef Duration
test GetPropertyDefL sizePropDef videoObjDef Size
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\test9video0.mp4
test AddTimePropertyL obj0 creationDatePropDef 20090611:235959.999999
test AddTimePropertyL obj0 lastModDatePropDef 20090611:235959.999999
test AddReal32PropertyL obj0 durationPropDef 30
test AddUint32PropertyL obj0 sizePropDef 999999
test AddObjectL obj0
test NewObjectL obj1 videoObjDef KL
test SetUriL obj1 e:\testing\data\test9video0.mp4
test GetObjectL obj2 obj1 KByUri EObjectDef videoObjDef
test SetGuidL EObject obj2 000009 000001
test PropertyCountL EObject obj2 4
test MovePropertiesL obj2 obj1
test PropertyCountL EObject obj2 0
test PropertyCountL EObject obj1 4
test GetPropertyDefL creaDatePropDef0 videoObjDef CreationDate
test PropertyCountL EPropertyDef obj1 creaDatePropDef0 1
test SetUriL obj1 e:\testing\data\test9video1.mp4
test AddObjectL obj1
test RemoveObjectsL KSync KById obj0 2 1
delete test
[Endtest]

[Test]
title Edit Object 10: Add*PropertyL, Set*ValueL, RemovePropertyL, PropertyL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL KLast e:\testing\data\test10video2.mp4
test GetPropertyDefL creaDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creaDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL titleDef videoObjDef Title
test AddTextPropertyL obj0 titleDef "Testi"
test GetPropertyDefL descrDef videoObjDef Description
test AddTextPropertyL obj0 descrDef "Testi"
test GetPropertyDefL commentDef videoObjDef Comment
test AddTextPropertyL obj0 commentDef "Testi"
test GetPropertyDefL ratingDef videoObjDef Rating
test AddUint8PropertyL obj0 ratingDef 3
test GetPropertyDefL genreDef videoObjDef Genre
test AddTextPropertyL obj0 genreDef "Testi"
test GetPropertyDefL copyrightDef videoObjDef Copyright
test AddTextPropertyL obj0 copyrightDef "Testi"
test GetPropertyDefL authorDef videoObjDef Author
test AddTextPropertyL obj0 authorDef "Testi"
test GetPropertyDefL bitrateDef videoObjDef Bitrate
test AddUint16PropertyL obj0 bitrateDef 32
test GetPropertyDefL framerateDef videoObjDef Framerate
test AddReal32PropertyL obj0 framerateDef 32
test PropertyCountL EObject obj0 11
test SetGuidL EObject obj0 000010 000001
test AddObjectL obj0
loop 11
test PropertyL propARRAY_INDEX KByDef obj0 LOOP_COUNTER 0
test BelongsToSessionL EProperty KLast ETrue 
test InDatabaseL EProperty KLast ETrue 
test DefL defARRAY_INDEX EPropertyDef KLast
test CompareL EPropertyDef KLast LOOP_COUNTER 0
endloop
loop 11
test PropertyL prop2_ARRAY_INDEX KByIndex obj0 LOOP_COUNTER
endloop
// Test out of range index parameters to PropertyL
allownextresult KErrArgument
test PropertyL propErr KByIndex obj0 -1
allownextresult KErrArgument
test PropertyL propErr KByIndex obj0 12
test SetTextValueL prop2 "Testi2"
test SetTextValueL prop3 "Testi2"
test SetTextValueL prop4 "Testi2"
test SetUint8ValueL prop5 4
test SetTextValueL prop6 "Testi2"
test SetTextValueL prop7 "Testi2"
test SetTextValueL prop8 "Testi2"
test SetUint16ValueL prop9 16
test SetReal32ValueL prop10 16
test PropertyCountL EObject obj0 11
loop 11
test ObjectL LOOP_COUNTER obj0
endloop
test OpenObjectL obj1 obj0 KById ENamespaceDef defaultNs
test RemovePropertyL obj1 Title
test RemovePropertyL obj1 Description
test RemovePropertyL obj1 Comment
test RemovePropertyL obj1 Rating
test RemovePropertyL obj1 Genre
test RemovePropertyL obj1 Copyright
test RemovePropertyL obj1 Author
test RemovePropertyL obj1 Bitrate
test RemovePropertyL obj1 Framerate
test PropertyCountL EObject obj1 3
test CommitObjectL obj1
test RemoveObjectL obj1 KById
delete test
[Endtest]

[Test]
title Edit Object 11: NewRelationL, AddRelationL, RemoveRelationL, SetGuid, GuidL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs

// Create two objects and add them to the database.
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creteDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creteDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000011 000001
test AddObjectL obj0
test NewObjectL obj1 videoObjDef KL
test GetPropertyDefL creteDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creteDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test SetGuidL EObject obj1 000011 000002
test AddObjectL obj1

// Now add some relations between the two objects.
test GetRelationDefL relDefContains defaultNs Contains
test NewRelationL rel0 obj1 relDefContains obj0 0 KL
test SetGuidL ERelation rel0 000011 000101
test GetRelationDefL relDefReplaces defaultNs Replaces
test NewRelationL rel1 obj1 relDefReplaces obj0 0 KLC
test SetGuidL ERelation rel1 000011 000102
test GetRelationDefL relDefIsVersionOf defaultNs IsVersionOf
test NewRelationL rel2 obj1 relDefIsVersionOf obj0 0 KL
test SetGuidL ERelation rel2 000011 000103
test GetRelationDefL relDefRequires defaultNs Requires
test NewRelationL rel3 obj1 relDefRequires obj0 0 KLC
test SetGuidL ERelation rel3 000011 000104
test GetRelationDefL relDefUses defaultNs Uses
test NewRelationL rel4 obj1 relDefUses obj0 0 KL
test SetGuidL ERelation rel4 000011 000105
test GetRelationDefL relDefReferences defaultNs References
test NewRelationL rel5 obj1 relDefReferences obj0 0 KLC
test SetGuidL ERelation rel5 000011 000106
test GetRelationDefL relDefSummarises defaultNs Summarises
test NewRelationL rel6 obj1 relDefSummarises obj0 0 KL
test SetGuidL ERelation rel6 000011 000107
test CompareL ERelationDef relDefContains relDefContains 0
test CompareL ERelationDef relDefReplaces relDefContains 1

// Now add the relations to the database, observe the additions and verify the observed results.
test AddRelationObserverL
loop 7
test BelongsToSessionL ERelation LOOP_COUNTER EFalse
test InDatabaseL ERelation LOOP_COUNTER EFalse
test AddRelationL LOOP_COUNTER
waittestclass test
test VerifyObserverNotificationTypeL ENotifyAdd
test BelongsToSessionL ERelation LOOP_COUNTER ETrue
test SessionL ERelation LOOP_COUNTER
test InDatabaseL ERelation LOOP_COUNTER ETrue
endloop
test RemoveRelationObserverL
test VerifyTItemIdsL ERelation 0 7

test GuidL ERelation rel0 000011 000101
test GuidL ERelation rel1 000011 000102
test GuidL ERelation rel2 000011 000103
test GuidL ERelation rel3 000011 000104
test GuidL ERelation rel4 000011 000105
test GuidL ERelation rel5 000011 000106
test GuidL ERelation rel6 000011 000107

// Remove the relations, observe the removals and verify the observed results.
test AddRelationItemObserverL
test AddRelationObserverL
loop 7
test RemoveRelationL LOOP_COUNTER
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
endloop
test RemoveRelationItemObserverL
test RemoveRelationObserverL
test VerifyMdERelationsL 0 7

// Final cleanup.
test RemoveObjectL obj0 KById
test RemoveObjectL obj1 KById
delete test 
[Endtest]

[Test]
title Edit Object 12: NewEventL, AddEventL, GetEventL, RemoveEventL, CompareL, ObjectIdL, TimeL, SourceL, ParticipantL, DefL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs

// Create an object and add it to the database.
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000012 000001
test AddObjectL obj0

// Add some events for the object.
test GetEventDefL createdEventDef defaultNs Created
test NewEventL event0 obj0 createdEventDef TestSource TestParticipant 20081130:235959.999999 KL
test GetEventDefL deletedEventDef defaultNs Deleted
test NewEventL event1 obj0 deletedEventDef TestSource TestParticipant 20081130:235959.999999 KLC
test GetEventDefL opendedEventDef defaultNs Opened
test NewEventL event2 obj0 opendedEventDef TestSource TestParticipant 20081130:235959.999999 KL
test GetEventDefL playedEventDef defaultNs Played
test NewEventL event3 obj0 playedEventDef TestSource TestParticipant 20081130:235959.999999 KLC
test GetEventDefL editedEventDef defaultNs Edited
test NewEventL event4 obj0 editedEventDef TestSource TestParticipant 20081130:235959.999999 KL
test GetEventDefL sentEventDef defaultNs Sent
test NewEventL event5 obj0 sentEventDef TestSource TestParticipant 20081130:235959.999999 KLC
test GetEventDefL receivedEventDef defaultNs Received
test NewEventL event6 obj0 receivedEventDef TestSource TestParticipant 20081130:235959.999999 KL

// Test some assorted CMdEEvent methods.
test DefL eventDef EEventDef event0
// Note: the last parameter to CompareL (in this case 0) is the expected result of the call to *::Compare.
test CompareL EEventDef createdEventDef eventDef 0
test ObjectIdL event0 obj0
test TimeL event0 20081130:235959.999999
test SourceL event0 TestSource 0
test ParticipantL event0 TestParticipant 0
test CompareL EEventDef createdEventDef createdEventDef 0
test CompareL EEventDef deletedEventDef createdEventDef 1

// Now add the events to the database, observe the additions and verify the observed results.
test AddEventObserverL
loop 7
test BelongsToSessionL EEvent LOOP_COUNTER EFalse
test InDatabaseL EEvent LOOP_COUNTER EFalse
test AddEventL LOOP_COUNTER
waittestclass test
test VerifyObserverNotificationTypeL ENotifyAdd
test BelongsToSessionL EEvent LOOP_COUNTER ETrue
test SessionL EEvent LOOP_COUNTER
test InDatabaseL EEvent LOOP_COUNTER ETrue
endloop
test RemoveEventObserverL
test VerifyTItemIdsL EEvent 0 7

test GetEventL event7 event0

// Remove the events, observe the removals and verify the observed results.
test AddEventObserverL
loop 7
test RemoveEventL LOOP_COUNTER
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
endloop
test RemoveEventObserverL
test VerifyTItemIdsL EEvent 0 7

// Final cleanup.
test RemoveObjectL obj0 KById
delete test
[Endtest]

[Test]
title Edit Object 13: RemoveEventsL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs

// Create an object and add it to the database.
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000013 000001
test AddObjectL obj0

// Add some events for the object.
test GetEventDefL createdEventDef defaultNs Created
test NewEventL event0 obj0 createdEventDef TestSource TestParticipant 20081130:235959.999999 KL
test GetEventDefL deletedEventDef defaultNs Deleted
test NewEventL event1 obj0 deletedEventDef TestSource TestParticipant 20081130:235959.999999 KLC
test GetEventDefL opendedEventDef defaultNs Opened
test NewEventL event2 obj0 opendedEventDef TestSource TestParticipant 20081130:235959.999999 KL
test GetEventDefL playedEventDef defaultNs Played
test NewEventL event3 obj0 playedEventDef TestSource TestParticipant 20081130:235959.999999 KLC
test GetEventDefL editedEventDef defaultNs Edited
test NewEventL event4 obj0 editedEventDef TestSource TestParticipant 20081130:235959.999999 KL
test GetEventDefL sentEventDef defaultNs Sent
test NewEventL event5 obj0 sentEventDef TestSource TestParticipant 20081130:235959.999999 KLC
test GetEventDefL receivedEventDef defaultNs Received
test NewEventL event6 obj0 receivedEventDef TestSource TestParticipant 20081130:235959.999999 KL

// Now add the events to the database, observe the additions and verify the observed results.
test AddEventObserverL
loop 7
test BelongsToSessionL EEvent LOOP_COUNTER EFalse
test InDatabaseL EEvent LOOP_COUNTER EFalse
test AddEventL LOOP_COUNTER
waittestclass test
test VerifyObserverNotificationTypeL ENotifyAdd
test BelongsToSessionL EEvent LOOP_COUNTER ETrue
test SessionL EEvent LOOP_COUNTER
test InDatabaseL EEvent LOOP_COUNTER ETrue
endloop
test RemoveEventObserverL
test VerifyTItemIdsL EEvent 0 7

// Remove the events, observe the removals and verify the observed results.
test AddEventObserverL
test RemoveEventsL KSync event0 3

request EEventsAsyncRemoved
test RemoveEventsL KAsync event3 4
wait EEventsAsyncRemoved
release EEventsAsyncRemoved

// Final cleanup.
test RemoveEventObserverL
test RemoveObjectL obj0 KById
delete test
[Endtest]

[Test]
title Edit Object 14: NewRelationL, AddRelationL, GetRelationL, UpdateRelationL, RemoveRelationL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs

// Create two objects and add them to the database.
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000014 000001
test AddObjectL obj0
test NewObjectL obj1 videoObjDef KL
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj1 000014 000002
test AddObjectL obj1

// Now add some relations between the two objects.
test GetRelationDefL relDefContains defaultNs Contains
test NewRelationL rel0 obj1 relDefContains obj0 0 KL
test GetRelationDefL relDefReplaces defaultNs Replaces
test NewRelationL rel1 obj1 relDefReplaces obj0 0 KLC
test GetRelationDefL relDefIsVersionOf defaultNs IsVersionOf
test NewRelationL rel2 obj1 relDefIsVersionOf obj0 0 KL
test GetRelationDefL relDefRequires defaultNs Requires
test NewRelationL rel3 obj1 relDefRequires obj0 0 KLC
test GetRelationDefL relDefUses defaultNs Uses
test NewRelationL rel4 obj1 relDefUses obj0 0 KL
test GetRelationDefL relDefReferences defaultNs References
test NewRelationL rel5 obj1 relDefReferences obj0 0 KLC
test GetRelationDefL relDefSummarises defaultNs Summarises
test NewRelationL rel6 obj1 relDefSummarises obj0 0 KL

// Now add the relations to the database.
loop 7
test BelongsToSessionL ERelation LOOP_COUNTER EFalse
test InDatabaseL ERelation LOOP_COUNTER EFalse
test AddRelationL LOOP_COUNTER
test BelongsToSessionL ERelation LOOP_COUNTER ETrue
test SessionL ERelation LOOP_COUNTER
test InDatabaseL ERelation LOOP_COUNTER ETrue
endloop

// Test UpdateRelationL.
test GetRelationL rel7 rel0
test UpdateRelationL 7

// Now remove the relations from the database.
loop 7
test RemoveRelationL LOOP_COUNTER
endloop

// Final cleanup.
test RemoveObjectL obj0 KById
test RemoveObjectL obj1 KById
delete test
[Endtest]

[Test]
title Edit Object 15: LeftObjectIdL, RightObjectIdL, ParameterL, SetParameterL, ...
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs

// Create three objects and add them to the database.
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000015 000001
test AddObjectL obj0
test NewObjectL obj1 videoObjDef KL
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test SetGuidL EObject obj1 000015 000002
test AddObjectL obj1
test NewObjectL obj2 videoObjDef KL
test GetPropertyDefL creationDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creationDatePropDef2 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20081130:235959.999999
test SetGuidL EObject obj2 000015 000003
test AddObjectL obj2

// Create some relations between obj1 and obj0.
test GetRelationDefL relDefContains defaultNs Contains
test NewRelationL rel0 obj1 relDefContains obj0 999 KL
test GetRelationDefL relDefReplaces defaultNs Replaces
test NewRelationL rel1 obj1 relDefReplaces obj0 999 KLC
test GetRelationDefL relDefIsVersionOf defaultNs IsVersionOf
test NewRelationL rel2 obj1 relDefIsVersionOf obj0 999 KL
test GetRelationDefL relDefRequires defaultNs Requires
test NewRelationL rel3 obj1 relDefRequires obj0 0 KLC
test GetRelationDefL relDefUses defaultNs Uses
test NewRelationL rel4 obj1 relDefUses obj0 0 KL
test GetRelationDefL relDefReferences defaultNs References
test NewRelationL rel5 obj1 relDefReferences obj0 0 KLC
test GetRelationDefL relDefSummarises defaultNs Summarises
test NewRelationL rel6 obj1 relDefSummarises obj0 0 KL

// Test some relation methods.
test LeftObjectIdL rel0 obj1
test RightObjectIdL rel0 obj0
test ParameterL rel0 999
test SetParameterL rel0 1000
test ParameterL rel0 1000
allownextresult KErrArgument
test SetLeftObjectIdL rel0 obj0
test SetLeftObjectIdL rel0 obj2
allownextresult KErrArgument
test SetRightObjectIdL rel0 obj2
test SetRightObjectIdL rel0 obj1
test SetLastModifiedDateL rel0 20101010:235959.999999
test LastModifiedDateL rel0 20101010:235959.999999

// Now add the relations to the database.
loop 7
test BelongsToSessionL ERelation LOOP_COUNTER EFalse
test InDatabaseL ERelation LOOP_COUNTER EFalse
test AddRelationL LOOP_COUNTER
test BelongsToSessionL ERelation LOOP_COUNTER ETrue
test SessionL ERelation LOOP_COUNTER
test InDatabaseL ERelation LOOP_COUNTER ETrue
endloop

// Now remove the relations from the database.
test RemoveRelationsL KSync rel0 3

request ERelationsAsyncRemoved
test RemoveRelationsL KAsync rel3 4
wait ERelationsAsyncRemoved
release ERelationsAsyncRemoved

// Final cleanup.
test RemoveObjectL obj0 KById
test RemoveObjectL obj1 KById
test RemoveObjectL obj2 KById
delete test
[Endtest]

[Test]
title Edit Object 16: UriL, SetUriL, DefL, SetDefL, CompareL, MediaIdL, ...
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test ImportMetadataL \Data\MdETestScripterImportMetadata.mde KSync

// Create an object and test some object definition primitives.
test GetObjectDefL objDef defaultNs Object
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test DefL objDef2 EObjectDef obj0
test CompareL EObjectDef videoObjDef objDef2 0
allownextresult KErrNotSupported
test SetDefL obj0 videoObjDef

test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000016 000001

// Test the object's SetUri, Uri, SetMediaId, MediaId, SetConfidential, Confidential, SetPlaceholder and Placeholder methods.
test SetUriL obj0 e:\testing\data\Test16Video1.3gp
test UriL obj0 e:\testing\data\test16video1.3gp
test SetMediaIdL obj0 121212
test MediaIdL obj0 121212
test SetConfidentialL obj0 EFalse
test ConfidentialL obj0 EFalse
test SetConfidentialL obj0 ETrue
test ConfidentialL obj0 ETrue
test SetPlaceholderL obj0 EFalse
test PlaceholderL obj0 EFalse
test SetPlaceholderL obj0 ETrue
test PlaceholderL obj0 ETrue

// Now add the object to the database.
test UsageCountL obj0 0 
test BelongsToSessionL EObject KLast EFalse
test InDatabaseL EObject KLast EFalse
test AddObjectObserverL
test AddObjectL obj0
waittestclass test
test VerifyObserverNotificationTypeL ENotifyAdd
test RemoveObjectObserverL
test VerifyTItemIdsL EObject 0 1
test BelongsToSessionL EObject KLast ETrue
test SessionL EObject KLast
test InDatabaseL EObject KLast ETrue

// Final cleanup.
test RemoveObjectL obj0 KById
delete test
[Endtest]

[Test]
title Edit Object 17: Create JPG Object
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL imageObjDef defaultNs Image
test NewObjectL obj0 imageObjDef KL
test SetUriL obj0 c:\Test17Image1.jpg
test GetPropertyDefL originPropDef imageObjDef Origin
test AddUint8PropertyL obj0 originPropDef 0
test GetPropertyDefL creationDatePropDef imageObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 imageObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL sizePropDef imageObjDef Size
test AddUint32PropertyL obj0 sizePropDef 733064
test GetPropertyDefL itemTypePropDef imageObjDef ItemType
test AddTextPropertyL obj0 itemTypePropDef "image/jpg"
test GetPropertyDefL drmPropDef imageObjDef DRM
test AddBoolPropertyL obj0 drmPropDef 0
test GetPropertyDefL releaseDatePropDef imageObjDef ReleaseDate
test AddTimePropertyL obj0 releaseDatePropDef 20081130:235959.999999
test GetPropertyDefL widthPropDef imageObjDef Width
test AddUint16PropertyL obj0 widthPropDef 1024
test GetPropertyDefL heightPropDef imageObjDef Height
test AddUint16PropertyL obj0 heightPropDef 768
test SetGuidL EObject obj0 000017 000001
test BelongsToSessionL EObject KLast EFalse
test InDatabaseL EObject KLast EFalse
test AddObjectL obj0
test BelongsToSessionL EObject KLast ETrue
test SessionL EObject KLast
test InDatabaseL EObject KLast ETrue
test RemoveObjectL obj0 KById
delete test
[Endtest]

[Test]
title Edit Object 18: AddFreeTextL, RemoveFreeTextL, FreeTextCountL, FreeTextL, FreeTextIndexL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\Test18Video1.3gp
test GetPropertyDefL creationDatePropDef videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test AddFreeTextL obj0 TestFreeText1
test FreeTextL obj0 0 TestFreeText1
test FreeTextIndexL obj0 0 TestFreeText1
test FreeTextCountL obj0 1
test RemoveFreeTextL obj0 0
allowerrorcodes KErrNotFound
test FreeTextIndexL obj0 0 TestFreeText1
test FreeTextCountL obj0 0
test AddFreeTextL obj0 TestFreeText1
test SetGuidL EObject KLast 000018 000001
test BelongsToSessionL EObject KLast EFalse
test InDatabaseL EObject KLast EFalse
test AddObjectL obj0
test BelongsToSessionL EObject KLast ETrue
test SessionL EObject KLast
test InDatabaseL EObject KLast ETrue
test RemoveObjectL obj0 KById
delete test
[Endtest]

[Test]
title Edit Object 19: Create MP3 Object With 8 Text 7 Int Properties
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL audioObjectDef defaultNs Audio
test NewObjectL obj0 audioObjectDef KL
test SetUriL 0 c:\Test19Audio1.mp3
test GetPropertyDefL creationDatePropDef audioObjectDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 audioObjectDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL sizePropDef audioObjectDef Size
test AddUint32PropertyL obj0 sizePropDef 5000
test GetPropertyDefL itemTypePropDef audioObjectDef ItemType
test AddTextPropertyL obj0 itemTypePropDef "audio/mp3"
test GetPropertyDefL titlePropDef audioObjectDef Title
test AddTextPropertyL obj0 titlePropDef "TestMp3"
test GetPropertyDefL drmPropDef audioObjectDef DRM
test AddBoolPropertyL obj0 drmPropDef 1
test GetPropertyDefL durationPropDef audioObjectDef Duration
test AddReal32PropertyL obj0 durationPropDef 1234
test GetPropertyDefL trackPropDef audioObjectDef Track
test AddUint16PropertyL obj0 trackPropDef 12
test GetPropertyDefL descriptionPropDef audioObjectDef Description
test AddTextPropertyL obj0 descriptionPropDef "Ambient noise from street"
test GetPropertyDefL commentPropDef audioObjectDef Comment
test AddTextPropertyL obj0 commentPropDef "No comments."
test GetPropertyDefL genrePropDef audioObjectDef Genre
test AddTextPropertyL obj0 genrePropDef "ambient"
test GetPropertyDefL artistPropDef audioObjectDef Artist
test AddTextPropertyL obj0 artistPropDef "Cars on street"
test GetPropertyDefL albumPropDef audioObjectDef Album
test AddTextPropertyL obj0 albumPropDef "Noises"
test GetPropertyDefL composerPropDef audioObjectDef Composer
test AddTextPropertyL obj0 composerPropDef "Myself"
test SetGuidL EObject obj0 000019 000001
test BelongsToSessionL EObject KLast EFalse
test InDatabaseL EObject KLast EFalse
test AddObjectL obj0
test BelongsToSessionL EObject KLast ETrue
test SessionL EObject KLast
test InDatabaseL EObject KLast ETrue
test RemoveObjectL obj0 KById
delete test
[Endtest]

[Test]
title Edit Object 20: Create MP4 Object With 17 Properties
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\Test20Video1.mp4
test GetPropertyDefL creationDatePropDef videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL titlePropDef videoObjDef Title
test AddTextPropertyL obj0 titlePropDef "Party video 1/2"
test GetPropertyDefL sizePropDef videoObjDef Size
test AddUint32PropertyL obj0 sizePropDef 12345678
test GetPropertyDefL descriptionPropDef videoObjDef Description
test AddTextPropertyL obj0 descriptionPropDef "First video from party."
test GetPropertyDefL commentPropDef videoObjDef Comment
test AddTextPropertyL obj0 commentPropDef "No comments."
test GetPropertyDefL ratingPropDef videoObjDef Rating
test AddUint8PropertyL obj0 ratingPropDef 4
test GetPropertyDefL accessCountPropDef videoObjDef AccessCount
test AddUint32PropertyL obj0 accessCountPropDef 0
test GetPropertyDefL genrePropDef videoObjDef Genre
test AddTextPropertyL obj0 genrePropDef "Party."
test GetPropertyDefL drmPropDef videoObjDef DRM
test AddBoolPropertyL obj0 drmPropDef 1
test GetPropertyDefL releasedatePropDef videoObjDef ReleaseDate
test AddTimePropertyL obj0 releasedatePropDef 20081130:235959.999999
test GetPropertyDefL itemTypePropDef videoObjDef ItemType
test AddTextPropertyL obj0 itemTypePropDef "video/mp4"
test GetPropertyDefL widthPropDef videoObjDef Width
test AddUint16PropertyL obj0 widthPropDef 640
test GetPropertyDefL heightPropDef videoObjDef Height
test AddUint16PropertyL obj0 heightPropDef 480
test GetPropertyDefL durationPropDef videoObjDef Duration
test AddReal32PropertyL obj0 durationPropDef 1234
test GetPropertyDefL bitratePropDef videoObjDef Bitrate
test AddUint16PropertyL obj0 bitratePropDef 25
test GetPropertyDefL artistPropDef videoObjDef Artist
test AddTextPropertyL obj0 artistPropDef "Myself"
test SetGuidL EObject obj0 000020 000001
test BelongsToSessionL EObject KLast EFalse
test InDatabaseL EObject KLast EFalse
test AddObjectL obj0
test BelongsToSessionL EObject KLast ETrue
test SessionL EObject KLast
test InDatabaseL EObject KLast ETrue
test RemoveObjectL obj0 KByUri
delete test
[Endtest]

[Test]
title Edit Object 21: Create MP4 Object
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\Test21Video1.mp4
test GetPropertyDefL creationDatePropDef videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL sizePropDef videoObjDef Size
test AddUint32PropertyL obj0 sizePropDef 12345678
test GetPropertyDefL accessCountPropDef videoObjDef AccessCount
test AddUint32PropertyL obj0 accessCountPropDef 0
test GetPropertyDefL drmPropDef videoObjDef DRM
test AddBoolPropertyL obj0 drmPropDef 1
test GetPropertyDefL releasedatePropDef videoObjDef ReleaseDate
test AddTimePropertyL obj0 releasedatePropDef 20081130:235959.999999
test GetPropertyDefL itemTypePropDef videoObjDef ItemType
test AddTextPropertyL obj0 itemTypePropDef "video/mp4"
test GetPropertyDefL widthPropDef videoObjDef Width
test AddUint16PropertyL obj0 widthPropDef 640
test GetPropertyDefL heightPropDef videoObjDef Height
test AddUint16PropertyL obj0 heightPropDef 480
test GetPropertyDefL durationPropDef videoObjDef Duration
test AddReal32PropertyL obj0 durationPropDef 1234
test SetGuidL EObject obj0 000021 000001
test BelongsToSessionL EObject KLast EFalse
test InDatabaseL EObject KLast EFalse
test AddObjectL obj0
test BelongsToSessionL EObject KLast ETrue
test SessionL EObject KLast
test InDatabaseL EObject KLast ETrue
test RemoveObjectL obj0 KByUri
delete test
[Endtest]

[Test]
title Edit Object 22: Create Album Object
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL albumObjDef defaultNs Album
test NewObjectL obj0 albumObjDef KL
test GetPropertyDefL creationDatePropDef albumObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 albumObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL typePropDef albumObjDef Type
test AddUint16PropertyL obj0 typePropDef 25
test GetPropertyDefL orderedPropDef albumObjDef Ordered
test AddBoolPropertyL obj0 orderedPropDef EFalse
test SetGuidL EObject obj0 000022 000001
test BelongsToSessionL EObject KLast EFalse
test InDatabaseL EObject KLast EFalse
test AddObjectL obj0
test BelongsToSessionL EObject KLast ETrue
test SessionL EObject KLast
test InDatabaseL EObject KLast ETrue
test RemoveObjectL obj0 KById
delete test
[Endtest]

[Test]
title Edit Object 23: Create Video Object
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\Test23Video1.mp4
test GetPropertyDefL creationDatePropDef videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL frameratePropDef videoObjDef Framerate
test AddReal32PropertyL obj0 frameratePropDef 25
test GetPropertyDefL audioFourCCPropDef videoObjDef AudioFourCC
test AddUint32PropertyL obj0 audioFourCCPropDef 2000
test GetPropertyDefL drmPropDef videoObjDef DRM
test AddBoolPropertyL obj0 drmPropDef 1
test GetPropertyDefL accessCountPropDef videoObjDef AccessCount
test AddUint32PropertyL obj0 accessCountPropDef 10
test GetPropertyDefL releaseDatePropDef videoObjDef ReleaseDate
test AddTimePropertyL obj0 releaseDatePropDef 20081130:235959.999999
test GetPropertyDefL durationPropDef videoObjDef Duration
test AddReal32PropertyL obj0 durationPropDef 60
test SetGuidL EObject obj0 000023 000001
test BelongsToSessionL EObject KLast EFalse
test InDatabaseL EObject KLast EFalse
test AddObjectL obj0
test BelongsToSessionL EObject KLast ETrue
test SessionL EObject KLast
test InDatabaseL EObject KLast ETrue
test RemoveObjectL obj0 KByUri
delete test
[Endtest]

[Test]
title Edit Object 24: Create Audio Object
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL audioObjDef defaultNs Audio
test NewObjectL obj0 audioObjDef KL
test SetUriL obj0 e:\testing\data\Test24Audio1.mp3
test GetPropertyDefL creationDatePropDef audioObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModifiedDatePropDef audioObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModifiedDatePropDef 20081130:235959.999999
test GetPropertyDefL samplingFrequencyPropDef audioObjDef SamplingFrequency
test AddReal32PropertyL obj0 samplingFrequencyPropDef 25
test GetPropertyDefL composerPropDef audioObjDef Composer
test AddTextPropertyL obj0 composerPropDef "Bach"
test GetPropertyDefL trackPropDef audioObjDef Track
test AddUint16PropertyL obj0 trackPropDef 1
test GetPropertyDefL originalArtistPropDef audioObjDef OriginalArtist
test AddTextPropertyL obj0 originalArtistPropDef "Nightwish"
test SetGuidL EObject obj0 000024 000001
test BelongsToSessionL EObject KLast EFalse
test InDatabaseL EObject KLast EFalse
test AddObjectL obj0
test BelongsToSessionL EObject KLast ETrue
test SessionL EObject KLast
test InDatabaseL EObject KLast ETrue
test RemoveObjectL obj0 KByUri
delete test
[Endtest]

[Test]
title Edit Object 25: Create Image Object
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL imageObjDef defaultNs Image
test NewObjectL obj0 imageObjDef KL
test SetUriL obj0 e:\testing\data\Test25Image1.jpg
test GetPropertyDefL creationDatePropDef imageObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModifiedDatePropDef imageObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModifiedDatePropDef 20081130:235959.999999
test GetPropertyDefL pixelXDimensionPropDef imageObjDef PixelXDimension
test AddUint32PropertyL obj0 pixelXDimensionPropDef 20
test GetPropertyDefL pixelYDimensionPropDef imageObjDef PixelYDimension
test AddUint32PropertyL obj0 pixelYDimensionPropDef 20
test GetPropertyDefL maxAperturePropDef imageObjDef MaxAperture
test AddReal32PropertyL obj0 maxAperturePropDef 20
test SetGuidL EObject obj0 000025 000001
test BelongsToSessionL EObject KLast EFalse
test InDatabaseL EObject KLast EFalse
test AddObjectL obj0
test BelongsToSessionL EObject KLast ETrue
test SessionL EObject KLast
test InDatabaseL EObject KLast ETrue
test RemoveObjectL obj0 KByUri
delete test
[Endtest]

[Test]
title Edit Object 26: *ValueL: Video
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL KLast e:\testing\data\test26video1.3gp
test RemoveObjectsL KSync KByUri obj0 1 0
test ImportMetadataL \Data\MdETestScripterImportMetadata.mde KSync
test OpenFullObjectL obj1 obj0 KByUri
test GetPropertyDefL creationDatePropDef videoObjDef CreationDate
test PropertyL creationDate KByDef obj1 creationDatePropDef 0
test TimeValueL creationDate 20080707:
test GetPropertyDefL lastModifiedDatePropDef videoObjDef LastModifiedDate
test PropertyL lastModifiedDate KByDef obj1 lastModifiedDatePropDef 0
test TimeValueL lastModifiedDate 20080707:
test GetPropertyDefL bitratePropDef videoObjDef Bitrate
test PropertyL bitrate KByDef obj1 bitratePropDef 0
test Uint16ValueL bitrate 23
test GetPropertyDefL sizePropDef videoObjDef Size
test PropertyL size KByDef obj1 sizePropDef 0
test Uint32ValueL size 66192
test GetPropertyDefL ratingPropDef videoObjDef Rating
test PropertyL rating KByDef obj1 ratingPropDef 0
test Uint8ValueL rating 4
test GetPropertyDefL widthPropDef videoObjDef Width
test PropertyL width KByDef obj1 widthPropDef 0
test Uint16ValueL width 176
test GetPropertyDefL heightPropDef videoObjDef Height
test PropertyL height KByDef obj1 heightPropDef 0
test Uint16ValueL height 144
test GetPropertyDefL durationPropDef videoObjDef Duration
test PropertyL duration KByDef obj1 durationPropDef 0
test Real32ValueL duration 21
test GetPropertyDefL releaseDatePropDef videoObjDef ReleaseDate
test PropertyL releaseDate KByDef obj1 releaseDatePropDef 0
test TimeValueL releaseDate 20080707:
test GetPropertyDefL captureDatePropDef videoObjDef CaptureDate
test PropertyL captureDate KByDef obj1 captureDatePropDef 0
test TimeValueL captureDate 20080707:
test GetPropertyDefL frameratePropDef videoObjDef Framerate
test PropertyL framerate KByDef obj1 frameratePropDef 0
test Real32ValueL framerate 7
test GetPropertyDefL drmPropDef videoObjDef DRM
test PropertyL drm KByDef obj1 drmPropDef 0
test BoolValueL drm EFalse
delete test
[Endtest]

[Test]
title Edit Object 27: *ValueL: All property types
create MdETestScripter test
waittestclass test
allowerrorcodes KErrCorrupt
test ImportSchemaL \Data\MdETestScripterSchema2.mde
test GetNamespaceDefL testNs "http:\/\/sw.nokia.com/MdE/TestSchema2"
test GetObjectDefL testObjDef testNs TestObjectType
test NewObjectL obj0 testObjDef KL
test SetUriL obj0 c:\data\other\testobject27
test GetPropertyDefL testPropertyBoolDef testObjDef TestPropertyBool
test AddBoolPropertyL obj0 testPropertyBoolDef EFalse
test PropertyL boolProp KByDef obj0 testPropertyBoolDef EFalse
test ReadOnlyL EPropertyDef testPropertyBoolDef EFalse
test BoolValueL boolProp EFalse
test GetPropertyDefL testPropertyInt8Def testObjDef TestPropertyInt8
test AddInt8PropertyL obj0 testPropertyInt8Def 0
test PropertyL int8Prop KByDef obj0 testPropertyInt8Def 0
test ReadOnlyL EPropertyDef testPropertyInt8Def ETrue
test Int8ValueL int8Prop 0
test GetPropertyDefL testPropertyUint8Def testObjDef TestPropertyUint8
test AddUint8PropertyL obj0 testPropertyUint8Def 0
test PropertyL uint8Prop KByDef obj0 testPropertyUint8Def 0
test ReadOnlyL EPropertyDef testPropertyUint8Def EFalse
test Uint8ValueL uint8Prop 0
test GetPropertyDefL testPropertyInt16Def testObjDef TestPropertyInt16
test AddInt16PropertyL obj0 testPropertyInt16Def 0
test PropertyL int16Prop KByDef obj0 testPropertyInt16Def 0
test ReadOnlyL EPropertyDef testPropertyInt16Def ETrue
test Int16ValueL int16Prop 0
test GetPropertyDefL testPropertyUint16Def testObjDef TestPropertyUint16
test AddUint16PropertyL obj0 testPropertyUint16Def 0
test PropertyL uint16Prop KByDef obj0 testPropertyUint16Def 0
test ReadOnlyL EPropertyDef testPropertyUint16Def EFalse
test Uint16ValueL uint16Prop 0
test GetPropertyDefL testPropertyInt32Def testObjDef TestPropertyInt32
test AddInt32PropertyL obj0 testPropertyInt32Def 0
test PropertyL int32Prop KByDef obj0 testPropertyInt32Def 0
test ReadOnlyL EPropertyDef testPropertyInt32Def ETrue
test Int32ValueL int32Prop 0
test GetPropertyDefL testPropertyUint32Def testObjDef TestPropertyUint32
test AddUint32PropertyL obj0 testPropertyUint32Def 0
test PropertyL uint32Prop KByDef obj0 testPropertyUint32Def 0
test ReadOnlyL EPropertyDef testPropertyUint32Def EFalse
test Uint32ValueL uint32Prop 0
test GetPropertyDefL testPropertyInt64Def testObjDef TestPropertyInt64
test AddInt64PropertyL obj0 testPropertyInt64Def 0
test PropertyL int64Prop KByDef obj0 testPropertyInt64Def 0
test ReadOnlyL EPropertyDef testPropertyInt64Def ETrue
test Int64ValueL int64Prop 0
test GetPropertyDefL testPropertyReal32Def testObjDef TestPropertyReal32
test AddReal32PropertyL obj0 testPropertyReal32Def 0
test PropertyL real32Prop KByDef obj0 testPropertyReal32Def 0
test ReadOnlyL EPropertyDef testPropertyReal32Def EFalse
test Real32ValueL real32Prop 0
test GetPropertyDefL testPropertyReal64Def testObjDef TestPropertyReal64
test AddReal64PropertyL obj0 testPropertyReal64Def 0
test PropertyL real64Prop KByDef obj0 testPropertyReal64Def 0
test ReadOnlyL EPropertyDef testPropertyReal64Def ETrue
test Real64ValueL real64Prop 0
test GetPropertyDefL testPropertyTimeDef testObjDef TestPropertyTime
test AddTimePropertyL obj0 testPropertyTimeDef 20081130:235959.999999
test PropertyL timeProp KByDef obj0 testPropertyTimeDef 0
test ReadOnlyL EPropertyDef testPropertyTimeDef EFalse
test TimeValueL timeProp 20081130:235959.999999
test GetPropertyDefL testPropertyTextDef testObjDef TestPropertyText
test AddTextPropertyL obj0 testPropertyTextDef "Test Text"
test PropertyL textProp KByDef obj0 testPropertyTextDef 0
test ReadOnlyL EPropertyDef testPropertyTextDef ETrue
test TextValueL textProp "Test Text"
test GetPropertyDefL creaDatePropDef0 testObjDef CreationDate
test AddTimePropertyL obj0 creaDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 testObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000027 000001
test AddObjectL obj0
test BelongsToSessionL EObject obj0 ETrue
test SessionL EObject obj0
test InDatabaseL EObject obj0 ETrue
delete test
[Endtest]

[Test]
title Edit Object 28: Add*PropertyL: KErrArgument
create MdETestScripter test
waittestclass test
allowerrorcodes KErrCorrupt
test ImportSchemaL \Data\MdETestScripterSchema2.mde
test GetNamespaceDefL testNs "http:\/\/sw.nokia.com/MdE/TestSchema2"
test GetObjectDefL testObjDef testNs TestObjectType
test NewObjectL obj0 testObjDef KL
test SetUriL obj0 c:\data\other\testobject28
test GetPropertyDefL testPropertyTimeDef testObjDef TestPropertyTime
test GetPropertyDefL testPropertyTextDef testObjDef TestPropertyText
allownextresult KErrArgument
test AddBoolPropertyL obj0 testPropertyTimeDef EFalse
allownextresult KErrArgument
test AddInt8PropertyL obj0 testPropertyTimeDef 0
allownextresult KErrArgument
test AddUint8PropertyL obj0 testPropertyTimeDef 0
allownextresult KErrArgument
test AddInt16PropertyL obj0 testPropertyTimeDef 0
allownextresult KErrArgument
test AddUint16PropertyL obj0 testPropertyTimeDef 0
allownextresult KErrArgument
test AddInt32PropertyL obj0 testPropertyTimeDef 0
allownextresult KErrArgument
test AddUint32PropertyL obj0 testPropertyTimeDef 0
allownextresult KErrArgument
test AddInt64PropertyL obj0 testPropertyTimeDef 0
allownextresult KErrArgument
test AddReal32PropertyL obj0 testPropertyTimeDef 0
allownextresult KErrArgument
test AddReal64PropertyL obj0 testPropertyTimeDef 0
allownextresult KErrArgument
test AddTextPropertyL obj0 testPropertyTimeDef "Test Text"
allownextresult KErrArgument
test AddTimePropertyL obj0 testPropertyTextDef 20080707:
test ReadOnlyL EPropertyDef testPropertyTextDef ETrue
test GetPropertyDefL creaDatePropDef0 testObjDef CreationDate
test AddTimePropertyL obj0 creaDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 testObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000028 000001
test AddObjectL obj0
test BelongsToSessionL EObject obj0 ETrue
test SessionL EObject obj0
test InDatabaseL EObject obj0 ETrue
delete test
[Endtest]

[Test]
title Edit Object 29: Min*ValueL, Max*ValueL
create MdETestScripter test
waittestclass test
allowerrorcodes KErrCorrupt
test ImportSchemaL \Data\MdETestScripterSchema2.mde
test GetNamespaceDefL testNs "http:\/\/sw.nokia.com/MdE/TestSchema2"
test GetObjectDefL testObjDef testNs TestObjectType
test GetPropertyDefL testPropInt32 testObjDef TestPropertyInt32
test MinInt32ValueL testPropInt32 -2147483648
test MaxInt32ValueL testPropInt32 2147483647
test GetPropertyDefL testPropUint32 testObjDef TestPropertyUint32
test MinUint32ValueL testPropUint32 0
test MaxUint32ValueL testPropUint32 4294967295
test GetPropertyDefL testPropInt64 testObjDef TestPropertyInt64
test MinInt64ValueL testPropInt64 -9223372036854775808
test MaxInt64ValueL testPropInt64 +9223372036854775807
test GetPropertyDefL testPropReal64 testObjDef TestPropertyReal64
test MinRealValueL testPropReal64 "-1.797693134862e+308"
test MaxRealValueL testPropReal64 "1.797693134862e+308"
test GetPropertyDefL testPropTime testObjDef TestPropertyTime
test MinTimeValueL testPropTime 00000000:
test MaxTimeValueL testPropTime 20100528:163021 
test GetPropertyDefL testPropText testObjDef TestPropertyText
test MinTextLengthL testPropText 1
test MaxTextLengthL testPropText 65535
delete test
[Endtest]

[Test]
title Edit Object 30: RemoveObjectsL KSync KById
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000030 000001
test AddObjectL obj0
test NewObjectL obj1 videoObjDef KL
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test SetGuidL EObject obj1 000030 000002
test AddObjectL obj1
test NewObjectL obj2 videoObjDef KL
test GetPropertyDefL creationDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creationDatePropDef2 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20081130:235959.999999
test SetGuidL EObject obj2 000030 000003
test AddObjectL obj2
test NewObjectL obj3 videoObjDef KL
test GetPropertyDefL creationDatePropDef3 videoObjDef CreationDate
test AddTimePropertyL obj3 creationDatePropDef3 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef3 videoObjDef LastModifiedDate
test AddTimePropertyL obj3 lastModDatePropDef3 20081130:235959.999999
test SetGuidL EObject obj3 000030 000004
test AddObjectL obj3
test NewObjectL obj4 videoObjDef KL
test GetPropertyDefL creationDatePropDef4 videoObjDef CreationDate
test AddTimePropertyL obj4 creationDatePropDef4 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef4 videoObjDef LastModifiedDate
test AddTimePropertyL obj4 lastModDatePropDef4 20081130:235959.999999
test SetGuidL EObject obj4 000030 000005
test AddObjectL obj4
test RemoveObjectsL KSync KById obj0 5
delete test
[Endtest]

[Test]
title Edit Object 31: RemoveObjectsL KSync KByUri
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000031 000001
test SetUriL obj0 e:\testing\data\Test31Video1.3gp
test AddObjectL obj0
test NewObjectL obj1 videoObjDef KL
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test SetGuidL EObject obj1 000031 000002
test SetUriL obj1 e:\testing\data\Test31Video2.3gp
test AddObjectL obj1
test NewObjectL obj2 videoObjDef KL
test GetPropertyDefL creationDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creationDatePropDef2 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20081130:235959.999999
test SetGuidL EObject obj2 000031 000003
test SetUriL obj2 e:\testing\data\Test31Video3.3gp
test AddObjectL obj2
test NewObjectL obj3 videoObjDef KL
test GetPropertyDefL creationDatePropDef3 videoObjDef CreationDate
test AddTimePropertyL obj3 creationDatePropDef3 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef3 videoObjDef LastModifiedDate
test AddTimePropertyL obj3 lastModDatePropDef3 20081130:235959.999999
test SetGuidL EObject obj3 000031 000004
test SetUriL obj3 e:\testing\data\Test31Video4.3gp
test AddObjectL obj3
test NewObjectL obj4 videoObjDef KL
test GetPropertyDefL creationDatePropDef4 videoObjDef CreationDate
test AddTimePropertyL obj4 creationDatePropDef4 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef4 videoObjDef LastModifiedDate
test AddTimePropertyL obj4 lastModDatePropDef4 20081130:235959.999999
test SetGuidL EObject obj4 000031 000005
test SetUriL obj4 e:\testing\data\Test31Video5.3gp
test AddObjectL obj4
test RemoveObjectsL KSync KByUri obj0 5 
delete test
[Endtest]

[Test]
title Edit Object 32: RemoveObjectsL KAsync KById
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000032 000001
test AddObjectL obj0
test NewObjectL obj1 videoObjDef KL
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test SetGuidL EObject obj1 000032 000002
test AddObjectL obj1
test NewObjectL obj2 videoObjDef KL
test GetPropertyDefL creationDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creationDatePropDef2 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20081130:235959.999999
test SetGuidL EObject obj2 000032 000003
test AddObjectL obj2
test NewObjectL obj3 videoObjDef KL
test GetPropertyDefL creationDatePropDef3 videoObjDef CreationDate
test AddTimePropertyL obj3 creationDatePropDef3 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef3 videoObjDef LastModifiedDate
test AddTimePropertyL obj3 lastModDatePropDef3 20081130:235959.999999
test SetGuidL EObject obj3 000032 000004
test AddObjectL obj3
test NewObjectL obj4 videoObjDef KL
test GetPropertyDefL creationDatePropDef4 videoObjDef CreationDate
test AddTimePropertyL obj4 creationDatePropDef4 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef4 videoObjDef LastModifiedDate
test AddTimePropertyL obj4 lastModDatePropDef4 20081130:235959.999999
test SetGuidL EObject obj4 000032 000005
test AddObjectL obj4
request EObjectsAsyncRemoved
test RemoveObjectsL KAsync KById obj0 5
wait EObjectsAsyncRemoved
release EObjectsAsyncRemoved
delete test
[Endtest]

[Test]
title Edit Object 33: RemoveObjectsL KAsync KByUri
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000033 000001
test SetUriL obj0 e:\testing\data\Test33Video1.3gp
test AddObjectL obj0
test NewObjectL obj1 videoObjDef KL
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test SetGuidL EObject obj1 000033 000002
test SetUriL obj1 e:\testing\data\Test33Video2.3gp
test AddObjectL obj1
test NewObjectL obj2 videoObjDef KL
test GetPropertyDefL creationDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creationDatePropDef2 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20081130:235959.999999
test SetGuidL EObject obj2 000033 000003
test SetUriL obj2 e:\testing\data\Test33Video3.3gp
test AddObjectL obj2
test NewObjectL obj3 videoObjDef KL
test GetPropertyDefL creationDatePropDef3 videoObjDef CreationDate
test AddTimePropertyL obj3 creationDatePropDef3 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef3 videoObjDef LastModifiedDate
test AddTimePropertyL obj3 lastModDatePropDef3 20081130:235959.999999
test SetGuidL EObject obj3 000033 000004
test SetUriL obj3 e:\testing\data\Test33Video4.3gp
test AddObjectL obj3
test NewObjectL obj4 videoObjDef KL
test GetPropertyDefL creationDatePropDef4 videoObjDef CreationDate
test AddTimePropertyL obj4 creationDatePropDef4 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef4 videoObjDef LastModifiedDate
test AddTimePropertyL obj4 lastModDatePropDef4 20081130:235959.999999
test SetGuidL EObject obj4 000033 000005
test SetUriL obj4 e:\testing\data\Test33Video5.3gp
test AddObjectL obj4
request EObjectsAsyncRemoved
test RemoveObjectsL KAsync KByUri obj0 5
wait EObjectsAsyncRemoved
release EObjectsAsyncRemoved
delete test
[Endtest]

[Test]
title Edit Object 34: AddItemsL KSync KAsync
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test NewObjectL obj0 videoObjDef KL
test AddTimePropertyL obj0 creationDatePropDef0 20090507:
test AddTimePropertyL obj0 lastModDatePropDef0 20090507:
test SetGuidL EObject obj0 000034 000001
test SetUriL obj0 e:\testing\data\Test34Video1.3gp
test NewObjectL obj1 videoObjDef KL
test AddTimePropertyL obj1 creationDatePropDef0 20090507:
test AddTimePropertyL obj1 lastModDatePropDef0 20090507:
test SetGuidL EObject obj1 000034 000002
test SetUriL obj1 e:\testing\data\Test34Video2.3gp
test NewObjectL obj2 videoObjDef KL
test AddTimePropertyL obj2 creationDatePropDef0 20090507:
test AddTimePropertyL obj2 lastModDatePropDef0 20090507:
test SetGuidL EObject obj2 000034 000003
test SetUriL obj2 e:\testing\data\Test34Video3.mp4
test AddItemsL KSync EObject 0 1
request EItemsAsyncAdd
test AddItemsL KAsync EObject 1 2
wait EItemsAsyncAdd
release EItemsAsyncAdd
delete test
[Endtest]

[Test]
title Edit Object 35: UpdateItemsL KSync KAsync
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test NewObjectL obj0 videoObjDef KL
test AddTimePropertyL obj0 creationDatePropDef0 20090601:
test AddTimePropertyL obj0 lastModDatePropDef0 20090601:
test SetGuidL EObject obj0 000035 000001
test SetUriL obj0 e:\testing\data\Test35Video1.3gp
test AddItemsL KSync EObject 0 1
test OpenObjectL obj1 obj0 KByUri ENamespaceDef defaultNs
test SetGuidL EObject obj1 000035 000002
test SetUriL obj1 e:\testing\data\Test35Video2.3gp
test UpdateItemsL KSync EObject 1 1
test OpenObjectL obj2 obj1 KByUri ENamespaceDef defaultNs
test SetGuidL EObject obj2 000035 000003
test SetUriL obj2 e:\testing\data\Test35Video3.3gp
request EItemsAsyncUpdate
test UpdateItemsL KAsync EObject 2 1
wait EItemsAsyncUpdate
release EItemsAsyncUpdate
delete test
[Endtest]

[Test]
title Edit Object 36: AddObjectL, AddObjectsL, RemoveObjectL, UriL, SetUriL
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs

// Create four objects.
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creaDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creaDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000036 000001
test NewObjectL obj1 videoObjDef KL
test GetPropertyDefL creaDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creaDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test SetGuidL EObject obj1 000036 000002
test NewObjectL obj2 videoObjDef KL
test GetPropertyDefL creaDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creaDatePropDef2 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20081130:235959.999999
test SetGuidL EObject obj2 000036 000003
test NewObjectL obj3 videoObjDef KL
test GetPropertyDefL creaDatePropDef3 videoObjDef CreationDate
test AddTimePropertyL obj3 creaDatePropDef3 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef3 videoObjDef LastModifiedDate
test AddTimePropertyL obj3 lastModDatePropDef3 20081130:235959.999999
test SetGuidL EObject obj3 000036 000004

// Test objects' SetUri & Uri
test SetUriL obj0 e:\testing\data\Test36Video1.3gp
test UriL obj0 e:\testing\data\test36video1.3gp
test SetUriL obj1 e:\testing\data\Test36Video2.mp4
test UriL obj1 e:\testing\data\test36video2.mp4

// Add the objects to the database, observe the additions and verify the observed results.
test AddObjectObserverL
test AddObjectL obj0
waittestclass test
test VerifyObserverNotificationTypeL ENotifyAdd
test AddObjectsL obj1 3
waittestclass test
test VerifyObserverNotificationTypeL ENotifyAdd
test RemoveObjectObserverL
test VerifyTItemIdsL EObject 0 4

// Remove the objects, observe the removals and verify the observed results.
test AddObjectObserverL
test RemoveObjectL obj0 KById
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
test RemoveObjectL obj1 KById
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
test RemoveObjectL obj2 KById
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
test RemoveObjectL obj3 KById
waittestclass test
test VerifyObserverNotificationTypeL ENotifyRemove
test RemoveObjectObserverL
test VerifyTItemIdsL EObject 0 4

// Final cleanup.
delete test
[Endtest]

[Test]
title Query 1: Object 
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 4 video objects to DB  
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\TEST_VIDEO8.mp4
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test NewObjectL obj1 videoObjDef KL
test SetUriL obj1 e:\testing\data\TEST_VIDEO9.mp4
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test NewObjectL obj2 videoObjDef KL
test SetUriL obj2 e:\testing\data\TEST_VIDEO10.mp4
test GetPropertyDefL creationDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creationDatePropDef2 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20081130:235959.999999
test NewObjectL obj3 videoObjDef KL
test SetUriL obj3 e:\testing\data\TEST_VIDEO11.mp4
test GetPropertyDefL creationDatePropDef3 videoObjDef CreationDate
test AddTimePropertyL obj3 creationDatePropDef3 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef3 videoObjDef LastModifiedDate
test AddTimePropertyL obj3 lastModDatePropDef3 20081130:235959.999999
test AddObjectsL obj0 4

// Query
test NewObjectQueryL rootCond defaultNs Item Video Object

test AddObjectConditionL objCond rootCond ObjectConditionCompare Uri e:\testing\data\TEST_VIDEO8.mp4

test SetObjectQueryResultL { obj0 }
test FindL -1 -1
waittestclass test

test RemoveObjectsL KSync KById obj0 4
delete test
[Endtest]

[Test]
title Query 2: Relation Conditions
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 4 video objects to DB  
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\TEST_VIDEO12.mp4
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test NewObjectL obj1 videoObjDef KL
test SetUriL obj1 e:\testing\data\TEST_VIDEO13.mp4
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test NewObjectL obj2 videoObjDef KL
test SetUriL obj2 e:\testing\data\TEST_VIDEO14.mp4
test GetPropertyDefL creationDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creationDatePropDef2 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20081130:235959.999999
test NewObjectL obj3 videoObjDef KL
test SetUriL obj3 e:\testing\data\TEST_VIDEO15.mp4
test GetPropertyDefL creationDatePropDef3 videoObjDef CreationDate
test AddTimePropertyL obj3 creationDatePropDef3 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef3 videoObjDef LastModifiedDate
test AddTimePropertyL obj3 lastModDatePropDef3 20081130:235959.999999
test AddObjectsL obj0 4
test GetRelationDefL relDefContains defaultNs Contains
test NewRelationL rel0 obj0 relDefContains obj1 0 KL
test NewRelationL rel1 obj0 relDefContains obj2 0 KL
test NewRelationL rel2 obj2 relDefContains obj3 0 KLC
loop 3
test AddRelationL LOOP_COUNTER
endloop

// Query
test NewRelationQueryL rootCond defaultNs Item Video Object

test AddRelationConditionL containsRelCond rootCond Left RelationDef Contains

test LeftL leftCond containsRelCond
test AddObjectConditionL objCond leftCond ObjectConditionCompare Uri e:\testing\data\TEST_VIDEO12.mp4

test SetRelationQueryResultL { rel0 rel1 }
test FindL -1 -1
waittestclass test

test RemoveRelationsL KSync rel0 3
test RemoveObjectsL KSync KById obj0 4
delete test
[Endtest]


[Test]
title Query 3: Time Property Conditions
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 4 video objects to DB  
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\TEST_VIDEO16.mp4
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test NewObjectL obj1 videoObjDef KL
test SetUriL obj1 e:\testing\data\TEST_VIDE17.mp4
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20090000:000000.000000
test NewObjectL obj2 videoObjDef KL
test SetUriL obj2 e:\testing\data\TEST_VIDEO18.mp4
test GetPropertyDefL creationDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creationDatePropDef2 20090000:000000.000000
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20090000:000000.000001
test NewObjectL obj3 videoObjDef KL
test SetUriL obj3 e:\testing\data\TEST_VIDEO19.mp4
test GetPropertyDefL creationDatePropDef3 videoObjDef CreationDate
test AddTimePropertyL obj3 creationDatePropDef3 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef3 videoObjDef LastModifiedDate
test AddTimePropertyL obj3 lastModDatePropDef3 20090000:000000.000002
test AddObjectsL obj0 4


test NewObjectQueryL rootCond defaultNs Item Video Object
test AddPropertyConditionL propCond rootCond lastModDatePropDef0 TimeRange Greater 20090000:000000.000000 00000000:000000.000000


test SetObjectQueryResultL { obj2 obj3 }
test FindL -1 -1
waittestclass test

test RemoveObjectsL KSync KById obj0 4
delete test
[Endtest]


[Test]
title Query 4: all images with JPEG MIME
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL imageObjDef defaultNs Image
test NewObjectL obj0 imageObjDef KL
test SetUriL obj0 e:\testing\data\Test25Image1.jpg
test GetPropertyDefL itemTypePropertyPropDef imageObjDef ItemType
test AddTextPropertyL obj0 itemTypePropertyPropDef "image/jpeg"
test GetPropertyDefL creationDatePropDef imageObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModifiedDatePropDef imageObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModifiedDatePropDef 20081130:235959.999999
test AddObjectL obj0

test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj1 videoObjDef KL
test SetUriL obj1 e:\testing\data\TEST_VIDE17.mp4
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20090000:000000.000000
test AddObjectL obj1

test NewObjectQueryL rootCond defaultNs Item Image Object
test AddPropertyConditionL jpegMimeCond rootCond itemTypePropertyPropDef TextCompare Equals image/jpeg
test SetObjectQueryResultL { obj0 }
test FindL -1 -1
waittestclass test
test RemoveObjectL obj0 KById
delete test
[Endtest]

[Test]
title Query 5: all mediaobject properties from images and videos
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL mediaObjectDef defaultNs MediaObject
test GetObjectDefL imageObjDef defaultNs Image
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 imageObjDef KL
test SetUriL obj0 e:\testing\data\Test25Image1.jpg
test GetPropertyDefL itemTypePropertyPropDef imageObjDef ItemType
test AddTextPropertyL obj0 itemTypePropertyPropDef "image/jpeg"
test GetPropertyDefL creationDatePropDef imageObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModifiedDatePropDef imageObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModifiedDatePropDef 20081130:235959.999999
test AddObjectL obj0

test NewObjectL obj1 videoObjDef KL
test SetUriL obj1 e:\testing\data\TEST_VIDE17.mp4
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20090000:000000.000000
test AddObjectL obj1

test NewObjectQueryL rootCond defaultNs Item MediaObject LookupObject { imageObjDef videoObjDef }
test SetObjectQueryResultL { obj0 obj1 }
test FindL -1 -1
waittestclass test

test RemoveObjectsL KSync KById obj0 2
[Endtest]

[Test]
title Query 6: usage counts and titles from "user" albums, sorted by title A->Z
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs

test GetObjectDefL albumObjDef defaultNs Album
test NewObjectL obj0 albumObjDef KL
test GetPropertyDefL titleDef albumObjDef Title
test AddTextPropertyL obj0 titleDef "Humppaa 0"
// test GetPropertyDefL usageCountPropDef albumObjDef UsageCount
// test AddInt32PropertyL obj0 usageCountPropDef 25
test GetPropertyDefL creationDatePropDef albumObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 albumObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL typePropDef albumObjDef Type
test AddUint16PropertyL obj0 typePropDef EAlbumUser
test GetPropertyDefL orderedPropDef albumObjDef Ordered
test AddBoolPropertyL obj0 orderedPropDef EFalse
test SetGuidL EObject obj0 000022 000001
test AddObjectL obj0

test GetObjectDefL albumObjDef1 defaultNs Album
test NewObjectL obj1 albumObjDef1 KL
// test GetPropertyDefL titleDef albumObjDef Title
test AddTextPropertyL obj1 titleDef "Humppaa 1"
// test GetPropertyDefL usageCountPropDef1 albumObjDef1 UsageCount
// test AddInt32PropertyL obj1 usageCountPropDef1 10
test GetPropertyDefL creationDatePropDef1 albumObjDef1 CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 albumObjDef1 LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test GetPropertyDefL typePropDef1 albumObjDef1 Type
test AddUint16PropertyL obj1 typePropDef1 EAlbumUser
test GetPropertyDefL orderedPropDef1 albumObjDef1 Ordered
test AddBoolPropertyL obj1 orderedPropDef1 EFalse
test SetGuidL EObject obj1 000022 000002
test AddObjectL obj1


test NewObjectL obj2 albumObjDef KL
// test GetPropertyDefL titleDef albumObjDef Title
test AddTextPropertyL obj2 titleDef "Humppaa 2"
// test GetPropertyDefL usageCountPropDef1 albumObjDef1 UsageCount
// test AddInt32PropertyL obj2 usageCountPropDef1 10
test AddTimePropertyL obj2 creationDatePropDef1 20081130:235959.999999
test AddTimePropertyL obj2 lastModDatePropDef1 20081130:235959.999999
test AddUint16PropertyL obj2 typePropDef1 EAlbumUserPredefined
test AddBoolPropertyL obj2 orderedPropDef1 EFalse
test SetGuidL EObject obj2 000022 000003
test AddObjectL obj2

test GetRelationDefL relDefContains defaultNs Contains
test NewRelationL rel0 obj0 relDefContains obj1 0 KL
test NewRelationL rel1 obj0 relDefContains obj2 0 KL

// test UsageCountL obj0 2
// test UsageCountL obj1 1
// test UsageCountL obj2 1

loop 2
test AddRelationL LOOP_COUNTER
endloop



test NewObjectQueryL rootCond defaultNs Item Album Object

test GetPropertyDefL titlePropDef albumObjDef Title
test AddPropertyFilterL titlePropDef
test AppendOrderRuleL ESortAscending EOrderRuleTypeProperty titlePropDef

test SetOperatorL rootCond ELogicConditionOperatorOr
test AddPropertyConditionL albumPropCond rootCond typePropDef UintRange Less EAlbumUserPredefined EAlbumUserPredefined
test AddPropertyConditionL typePropCond rootCond typePropDef PropCond
test SetNegateL typePropCond ETrue

test SetObjectQueryResultL { obj0 obj1 }
test FindL -1 -1
waittestclass test



test RemoveRelationsL KSync rel0 2
test RemoveObjectsL KSync KById obj0 2
[Endtest]

[Test]
title Query 7: usage counts and titles from used tags and sort in descending order by usage count
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs

test GetObjectDefL albumObjDef defaultNs Album
test NewObjectL obj0 albumObjDef KL
test GetPropertyDefL titleDef albumObjDef Title
test AddTextPropertyL obj0 titleDef "Humppaa 0"
// test GetPropertyDefL usageCountPropDef albumObjDef UsageCount
// test AddInt32PropertyL obj0 usageCountPropDef 25
test GetPropertyDefL creationDatePropDef albumObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 albumObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL typePropDef albumObjDef Type
test AddUint16PropertyL obj0 typePropDef EAlbumUser
test GetPropertyDefL orderedPropDef albumObjDef Ordered
test AddBoolPropertyL obj0 orderedPropDef EFalse
test SetGuidL EObject obj0 000022 000001
test AddObjectL obj0

test GetObjectDefL albumObjDef1 defaultNs Album
test NewObjectL obj1 albumObjDef1 KL
// test GetPropertyDefL titleDef albumObjDef Title
test AddTextPropertyL obj1 titleDef "Humppaa 1"
// test GetPropertyDefL usageCountPropDef1 albumObjDef1 UsageCount
// test AddInt32PropertyL obj1 usageCountPropDef1 10
test GetPropertyDefL creationDatePropDef1 albumObjDef1 CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 albumObjDef1 LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test GetPropertyDefL typePropDef1 albumObjDef1 Type
test AddUint16PropertyL obj1 typePropDef1 EAlbumUser
test GetPropertyDefL orderedPropDef1 albumObjDef1 Ordered
test AddBoolPropertyL obj1 orderedPropDef1 EFalse
test SetGuidL EObject obj1 000022 000002
test AddObjectL obj1


test NewObjectL obj2 albumObjDef KL
// test GetPropertyDefL titleDef albumObjDef Title
test AddTextPropertyL obj2 titleDef "Humppaa 2"
// test GetPropertyDefL usageCountPropDef1 albumObjDef1 UsageCount
// test AddInt32PropertyL obj2 usageCountPropDef1 10
test AddTimePropertyL obj2 creationDatePropDef1 20081130:235959.999999
test AddTimePropertyL obj2 lastModDatePropDef1 20081130:235959.999999
test AddUint16PropertyL obj2 typePropDef1 EAlbumUserPredefined
test AddBoolPropertyL obj2 orderedPropDef1 EFalse
test SetGuidL EObject obj2 000022 000003
test AddObjectL obj2

test GetObjectDefL tagObjDef defaultNs Tag

test NewObjectL tag0 tagObjDef KL
test AddTimePropertyL tag0 creationDatePropDef1 20081130:235959.999999
test AddTimePropertyL tag0 lastModDatePropDef1 20081130:235959.999999

test NewObjectL tag1 tagObjDef KL
test AddTimePropertyL tag1 creationDatePropDef1 20081130:235959.999999
test AddTimePropertyL tag1 lastModDatePropDef1 20081130:235959.999999

test AddObjectL tag0
test AddObjectL tag1

test GetRelationDefL relDefContains defaultNs Contains
test NewRelationL rel0 obj0 relDefContains tag0 0 KL
test NewRelationL rel1 obj1 relDefContains tag1 0 KL
test NewRelationL rel2 obj2 relDefContains tag1 0 KL

loop 3
test AddRelationL LOOP_COUNTER
endloop

test NewObjectQueryL rootCond defaultNs Count Object Object

test AddRelationConditionL relCond rootCond Left RelationDef Contains
test RightL rightRelCond relCond
test AddObjectConditionL objCond rightRelCond Object tag1 1

test SetObjectQueryResultL { obj1 obj2 }
test FindL -1 -1
waittestclass test

test RemoveRelationsL KSync rel0 3
test RemoveObjectsL KSync KById obj0 2
test RemoveObjectsL KSync KById tag0 2
[Endtest]

[Test]
title Query 8: object IDs from defined album
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs


test GetObjectDefL albumObjDef defaultNs Album
test NewObjectL albumObj0 albumObjDef KL
test GetPropertyDefL titleDef albumObjDef Title
test AddTextPropertyL albumObj0 titleDef "Humppaa 0"
test GetPropertyDefL creationDatePropDef albumObjDef CreationDate
test AddTimePropertyL albumObj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 albumObjDef LastModifiedDate
test AddTimePropertyL albumObj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL typePropDef albumObjDef Type
test AddUint16PropertyL albumObj0 typePropDef 25
test GetPropertyDefL orderedPropDef albumObjDef Ordered
test AddBoolPropertyL albumObj0 orderedPropDef EFalse
test SetGuidL EObject albumObj0 000022 000001
test AddObjectL albumObj0

test GetObjectDefL audioObjDef defaultNs Audio
test NewObjectL track0 audioObjDef KL
test AddTextPropertyL track0 titleDef "HumppaSong"
test AddTimePropertyL track0 creationDatePropDef 20081130:235959.999999
test AddTimePropertyL track0 lastModDatePropDef0 20081130:235959.999999
test AddObjectL track0

test GetRelationDefL relDefContains defaultNs Contains
test NewRelationL rel0 albumObj0 relDefContains track0 0 KL
test AddRelationL rel0

test NewObjectQueryL rootCond defaultNs Id Object Object
test AddRelationConditionL containsRelCond rootCond Right RelationDef Contains
test LeftL leftRelCond containsRelCond
test AddObjectConditionL objCond leftRelCond Object albumObj0 1


test SetObjectQueryResultL { track0 }
test FindL -1 -1
waittestclass test

test RemoveRelationL rel0
test RemoveObjectsL KSync KById albumObj0 2

[Endtest]

[Test]
title Query 9: object count from defined tag
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs

test GetObjectDefL albumObjDef defaultNs Album
test NewObjectL albumObj0 albumObjDef KL
test GetPropertyDefL titleDef albumObjDef Title
test AddTextPropertyL albumObj0 titleDef "Humppaa 0"
test GetPropertyDefL creationDatePropDef albumObjDef CreationDate
test AddTimePropertyL albumObj0 creationDatePropDef 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 albumObjDef LastModifiedDate
test AddTimePropertyL albumObj0 lastModDatePropDef0 20081130:235959.999999
test GetPropertyDefL typePropDef albumObjDef Type
test AddUint16PropertyL albumObj0 typePropDef 25
test GetPropertyDefL orderedPropDef albumObjDef Ordered
test AddBoolPropertyL albumObj0 orderedPropDef EFalse
test SetGuidL EObject albumObj0 000022 000001


test GetObjectDefL audioObjDef defaultNs Audio
test NewObjectL track0 audioObjDef KL
test AddTextPropertyL track0 titleDef "HumppaSong"
test AddTimePropertyL track0 creationDatePropDef 20081130:235959.999999
test AddTimePropertyL track0 lastModDatePropDef0 20081130:235959.999999

test AddObjectL albumObj0
test AddObjectL track0

test GetRelationDefL relDefContains defaultNs Contains
test NewRelationL rel0 albumObj0 relDefContains track0 0 KL


test AddRelationL rel0

test NewObjectQueryL rootCond defaultNs Count Object Object
test AddRelationConditionL containsRelCond rootCond Left RelationDef Contains
test RightL rightRelCond containsRelCond
test AddObjectConditionL objCond rightRelCond Object track0 1

test SetObjectQueryResultL { track0 }
test FindL -1 -1
waittestclass test

test RemoveRelationL rel0
test RemoveObjectsL KSync KById albumObj0 2

// test RemoveRelationsL KSync rel0 1
[Endtest]

[Test]
title Query 10: videos created within a year and (length less or equal than 30 seconds or size less than 1 MB)
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 4 video objects to DB  
test GetObjectDefL videoObjDef defaultNs Video


test GetPropertyDefL creationDatePropDef videoObjDef CreationDate
test GetPropertyDefL lastModDatePropDef videoObjDef LastModifiedDate

test GetPropertyDefL durationPropDef videoObjDef Duration
test GetPropertyDefL sizePropDef videoObjDef Size

test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\TEST_VIDEO16.mp4
test AddTimePropertyL obj0 creationDatePropDef 20071130:235959.999999
test AddTimePropertyL obj0 lastModDatePropDef 20081130:235959.999999
test AddReal32PropertyL obj0 durationPropDef 30
test AddUint32PropertyL obj0 sizePropDef 999999

test NewObjectL obj1 videoObjDef KL
test SetUriL obj1 e:\testing\data\TEST_VIDEO17.mp4
test AddTimePropertyL obj1 creationDatePropDef 20081130:235959.999999
test AddTimePropertyL obj1 lastModDatePropDef 20090000:000000.000000
test AddReal32PropertyL obj1 durationPropDef 28
test AddUint32PropertyL obj1 sizePropDef 999999

test NewObjectL obj2 videoObjDef KL
test SetUriL obj2 e:\testing\data\TEST_VIDEO18.mp4
test AddTimePropertyL obj2 creationDatePropDef 20080001:000000.000000
test AddTimePropertyL obj2 lastModDatePropDef 20090000:000000.000001
test AddReal32PropertyL obj2 durationPropDef 28
test AddUint32PropertyL obj2 sizePropDef 1000000

test NewObjectL obj3 videoObjDef KL
test SetUriL obj3 e:\testing\data\TEST_VIDEO19.mp4
test AddTimePropertyL obj3 creationDatePropDef 20091130:235959.999999
test AddTimePropertyL obj3 lastModDatePropDef 20090000:000000.000002
test AddReal32PropertyL obj3 durationPropDef 28
test AddUint32PropertyL obj3 sizePropDef 999999

test AddObjectsL obj0 4

test NewObjectQueryL rootCond defaultNs Item Video Object
test AddPropertyConditionL propCond rootCond creationDatePropDef TimeRange Between 20080000:000000.000000 20090000:000000.000000
test AddLogicConditionL durationCond rootCond OR

test AddPropertyConditionL durationPropCond durationCond durationPropDef RealRange LessOrEqual 30 30
test AddPropertyConditionL sizePropCond durationCond sizePropDef UintRange Less 1000000 1000000

test SetObjectQueryResultL { obj1 obj2 }
test FindL -1 -1
waittestclass test

test RemoveObjectsL KSync KById obj0 4
delete test
[Endtest]

[Test]
title Query 11: images within some region (GPS location in some rectangle)
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 4 video objects to DB  
test GetObjectDefL imageObjDef defaultNs Image


test GetPropertyDefL creationDatePropDef imageObjDef CreationDate
test GetPropertyDefL lastModDatePropDef imageObjDef LastModifiedDate

test GetPropertyDefL sizePropDef imageObjDef Size

test NewObjectL image0 imageObjDef KL
test SetUriL image0 e:\testing\data\TEST_IMAGE16.jpg
test AddTimePropertyL image0 creationDatePropDef 20071130:235959.999999
test AddTimePropertyL image0 lastModDatePropDef 20081130:235959.999999
test AddUint32PropertyL image0 sizePropDef 999999

test NewObjectL image1 imageObjDef KL
test SetUriL image1 e:\testing\data\TEST_IMAGE17.jpg
test AddTimePropertyL image1 creationDatePropDef 20081130:235959.999999
test AddTimePropertyL image1 lastModDatePropDef 20090000:000000.000000
test AddUint32PropertyL image1 sizePropDef 999999

test NewObjectL image2 imageObjDef KL
test SetUriL image2 e:\testing\data\TEST_IMAGE18.jpg
test AddTimePropertyL image2 creationDatePropDef 20080001:000000.000000
test AddTimePropertyL image2 lastModDatePropDef 20090000:000000.000001
test AddUint32PropertyL image2 sizePropDef 999999

test NewObjectL image3 imageObjDef KL
test SetUriL image3 e:\testing\data\TEST_IMAGE19.jpg
test AddTimePropertyL image3 creationDatePropDef 20091130:235959.999999
test AddTimePropertyL image3 lastModDatePropDef 20090000:000000.000002
test AddUint32PropertyL image3 sizePropDef 999999

test AddObjectsL image0 4

test GetObjectDefL locationObjectDef defaultNs Location
test GetPropertyDefL latitudeLocationPropDef locationObjectDef Latitude
test GetPropertyDefL longitudeLocationPropDef locationObjectDef Longitude

test NewObjectL loc0 locationObjectDef KL
test AddTimePropertyL loc0 creationDatePropDef 20091130:235959.999999
test AddTimePropertyL loc0 lastModDatePropDef 20090000:000000.000002
test AddReal64PropertyL loc0 latitudeLocationPropDef 61
test AddReal64PropertyL loc0 longitudeLocationPropDef 26

test NewObjectL loc1 locationObjectDef KL
test AddTimePropertyL loc1 creationDatePropDef 20091130:235959.999999
test AddTimePropertyL loc1 lastModDatePropDef 20090000:000000.000002
test AddReal64PropertyL loc1 latitudeLocationPropDef 62
test AddReal64PropertyL loc1 longitudeLocationPropDef 60

test AddObjectsL loc0 2

test GetRelationDefL relContainsLocationDef defaultNs ContainsLocation

test NewRelationL rel00 image0 relContainsLocationDef loc0 0 KL
test NewRelationL rel11 image1 relContainsLocationDef loc1 0 KL
test NewRelationL rel21 image2 relContainsLocationDef loc1 0 KL

test AddRelationL rel00
test AddRelationL rel11
test AddRelationL rel21

test NewObjectQueryL rootCond defaultNs Item Image Object

test AddRelationConditionL relCond rootCond Left RelationDef ContainsLocation
test RightL rightRelCond relCond

test AddPropertyConditionL latitudePropCond rightRelCond latitudeLocationPropDef RealRange Between 60 63
test AddPropertyConditionL longitudePropCond rightRelCond longitudeLocationPropDef RealRange Between 21 27

test SetObjectQueryResultL { image0 }
test FindL -1 -1
waittestclass test

test RemoveObjectsL KSync KById image0 4
test RemoveObjectsL KSync KById loc0 2
test RemoveRelationsL KSync rel00 3

delete test
[Endtest]

[Test]
title Query 12: from downloaded objects, which are modified (last modified date) during this month
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 4 video objects to DB  
test GetObjectDefL imageObjDef defaultNs Image
test GetObjectDefL videoObjDef defaultNs Video
test GetObjectDefL objDef defaultNs Object

test GetPropertyDefL originPropDef objDef Origin

test GetPropertyDefL creationDatePropDef imageObjDef CreationDate
test GetPropertyDefL lastModDatePropDef imageObjDef LastModifiedDate

test GetPropertyDefL videoCreationDatePropDef videoObjDef CreationDate
test GetPropertyDefL videoLastModDatePropDef videoObjDef LastModifiedDate

test GetPropertyDefL sizePropDef imageObjDef Size

test NewObjectL image0 imageObjDef KL
test SetUriL image0 e:\testing\data\TEST_IMAGE16.jpg
test AddTimePropertyL image0 creationDatePropDef 20071130:235959.999999
test AddTimePropertyL image0 lastModDatePropDef 20081130:235959.999999
test AddUint32PropertyL image0 sizePropDef 999999
test AddUint8PropertyL image0 originPropDef ECamera

test NewObjectL image1 imageObjDef KL
test SetUriL image1 e:\testing\data\TEST_IMAGE17.jpg
test AddTimePropertyL image1 creationDatePropDef 20081130:235959.999999
test AddTimePropertyL image1 lastModDatePropDef 20090001:000000.000000
test AddUint32PropertyL image1 sizePropDef 999999
test AddUint8PropertyL image1 originPropDef EDownloaded

test NewObjectL video0 videoObjDef KL
test SetUriL video0 e:\testing\data\TEST_VIDEO18.jpg
test AddTimePropertyL video0 videoCreationDatePropDef 20080001:000000.000000
test AddTimePropertyL video0 videoLastModDatePropDef 20090000:000000.000001
test AddUint32PropertyL video0 sizePropDef 999999
test AddUint8PropertyL video0 originPropDef ESideLoaded

test NewObjectL video1 videoObjDef KL
test SetUriL video1 e:\testing\data\TEST_VIDEO19.jpg
test AddTimePropertyL video1 videoCreationDatePropDef 20091130:235959.999999
test AddTimePropertyL video1 videoLastModDatePropDef 20091130:235959.999999
test AddUint32PropertyL video1 sizePropDef 999999
test AddUint8PropertyL video1 originPropDef EDownloaded

test AddObjectsL image0 2
test AddObjectsL video0 2

test NewObjectQueryL rootCond defaultNs Item Object Object

test AddPropertyFilterL sizePropDef
test AddPropertyConditionL originPropCond rootCond originPropDef UintRange Equal EDownloaded 0
test AddPropertyConditionL lastModPropCond rootCond videoLastModDatePropDef TimeRange Between 20090000:000000.000000 20090100:000000.000000

test SetObjectQueryResultL { image1 }
test FindL -1 -1
waittestclass test

test RemoveObjectsL KSync KById image0 2
test RemoveObjectsL KSync KById video0 2


[Endtest]

[Test]
title Query 13: width, height and size properties from images and videos, sorted by size (largest->smallest)
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 2 image objects and 2 video objects to DB 
test GetObjectDefL imageObjDef defaultNs Image
test GetObjectDefL videoObjDef defaultNs Video
test GetObjectDefL objDef defaultNs Object
test GetObjectDefL mediaObjDef defaultNs MediaObject

test GetPropertyDefL originPropDef objDef Origin

test GetPropertyDefL creationDatePropDef imageObjDef CreationDate
test GetPropertyDefL lastModDatePropDef imageObjDef LastModifiedDate

test GetPropertyDefL videoCreationDatePropDef videoObjDef CreationDate
test GetPropertyDefL videoLastModDatePropDef videoObjDef LastModifiedDate

test GetPropertyDefL widthPropDef mediaObjDef Width
test GetPropertyDefL heightPropDef mediaObjDef Height
test GetPropertyDefL sizePropDef imageObjDef Size

test NewObjectL image0 imageObjDef KL
test SetUriL image0 e:\testing\data\TEST_IMAGE16.jpg
test AddTimePropertyL image0 creationDatePropDef 20071130:235959.999999
test AddTimePropertyL image0 lastModDatePropDef 20081130:235959.999999
test AddUint32PropertyL image0 sizePropDef 999999
test AddUint8PropertyL image0 originPropDef ECamera
test AddUint16PropertyL image0 widthPropDef 200
test AddUint16PropertyL image0 heightPropDef 100

test NewObjectL image1 imageObjDef KL
test SetUriL image1 e:\testing\data\TEST_IMAGE17.jpg
test AddTimePropertyL image1 creationDatePropDef 20081130:235959.999999
test AddTimePropertyL image1 lastModDatePropDef 20090000:000000.000000
test AddUint32PropertyL image1 sizePropDef 999997
test AddUint8PropertyL image1 originPropDef EDownloaded
test AddUint16PropertyL image1 widthPropDef 200
test AddUint16PropertyL image1 heightPropDef 100

test NewObjectL video0 videoObjDef KL
test SetUriL video0 e:\testing\data\TEST_VIDEO18.mp4
test AddTimePropertyL video0 videoCreationDatePropDef 20080001:000000.000000
test AddTimePropertyL video0 videoLastModDatePropDef 20090000:000000.000001
test AddUint32PropertyL video0 sizePropDef 999998
test AddUint8PropertyL video0 originPropDef ESideLoaded
test AddUint16PropertyL video0 widthPropDef 200
test AddUint16PropertyL video0 heightPropDef 100

test NewObjectL video1 videoObjDef KL
test SetUriL video1 e:\testing\data\TEST_VIDEO19.mp4
test AddTimePropertyL video1 videoCreationDatePropDef 20091130:235959.999999
test AddTimePropertyL video1 videoLastModDatePropDef 20091130:235959.999999
test AddUint32PropertyL video1 sizePropDef 999996
test AddUint8PropertyL video1 originPropDef EDownloaded
test AddUint16PropertyL video1 widthPropDef 200
test AddUint16PropertyL video1 heightPropDef 100

test AddObjectsL image0 2
test AddObjectsL video0 2

test NewObjectQueryL rootCond defaultNs Item MediaObject LookupObject { imageObjDef videoObjDef }

test AddPropertyFilterL widthPropDef
test AddPropertyFilterL heightPropDef
test AddPropertyFilterL sizePropDef
test AppendOrderRuleL ESortDescending EOrderRuleTypeProperty sizePropDef

test SetObjectQueryResultL { image0 video0 image1 video1 }
test FindL -1 -1
waittestclass test

test RemoveObjectsL KSync KById image0 2
test RemoveObjectsL KSync KById video0 2
[Endtest]

[Test]
title Query 14: distinct models from images by prefix "N", sorted A->Z
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 4 video objects to DB  
test GetObjectDefL imageObjDef defaultNs Image
test GetObjectDefL videoObjDef defaultNs Video
test GetObjectDefL objDef defaultNs Object
test GetObjectDefL mediaObjDef defaultNs MediaObject

test GetPropertyDefL originPropDef objDef Origin

test GetPropertyDefL creationDatePropDef imageObjDef CreationDate
test GetPropertyDefL lastModDatePropDef imageObjDef LastModifiedDate



test GetPropertyDefL widthPropDef mediaObjDef Width
test GetPropertyDefL heightPropDef mediaObjDef Height
test GetPropertyDefL sizePropDef imageObjDef Size
test GetPropertyDefL modelPropDef imageObjDef Model

test NewObjectL image0 imageObjDef KL
test SetUriL image0 e:\testing\data\TEST_IMAGE16.jpg
test AddTimePropertyL image0 creationDatePropDef 20071130:235959.999999
test AddTimePropertyL image0 lastModDatePropDef 20081130:235959.999999
test AddUint32PropertyL image0 sizePropDef 999999
test AddUint8PropertyL image0 originPropDef ECamera
test AddUint16PropertyL image0 widthPropDef 200
test AddUint16PropertyL image0 heightPropDef 100
test AddTextPropertyL image0 modelPropDef "NModel"

test NewObjectL image1 imageObjDef KL
test SetUriL image1 e:\testing\data\TEST_IMAGE17.jpg
test AddTimePropertyL image1 creationDatePropDef 20081130:235959.999999
test AddTimePropertyL image1 lastModDatePropDef 20090000:000000.000000
test AddUint32PropertyL image1 sizePropDef 999999
test AddUint8PropertyL image1 originPropDef EDownloaded
test AddUint16PropertyL image1 widthPropDef 200
test AddUint16PropertyL image1 heightPropDef 100
test AddTextPropertyL image1 modelPropDef "NModel"

test NewObjectL image2 imageObjDef KL
test SetUriL image2 e:\testing\data\TEST_IMAGE18.jpg
test AddTimePropertyL image2 creationDatePropDef 20080001:000000.000000
test AddTimePropertyL image2 lastModDatePropDef 20090000:000000.000001
test AddUint32PropertyL image2 sizePropDef 999999
test AddUint8PropertyL image2 originPropDef ESideLoaded
test AddUint16PropertyL image2 widthPropDef 200
test AddUint16PropertyL image2 heightPropDef 100
test AddTextPropertyL image2 modelPropDef "NModel"

test NewObjectL image3 imageObjDef KL
test SetUriL image3 e:\testing\data\TEST_IMAGE39.jpg
test AddTimePropertyL image3 creationDatePropDef 20091130:235959.999999
test AddTimePropertyL image3 lastModDatePropDef 20091130:235959.999999
test AddUint32PropertyL image3 sizePropDef 999999
test AddUint8PropertyL image3 originPropDef EDownloaded
test AddUint16PropertyL image3 widthPropDef 200
test AddUint16PropertyL image3 heightPropDef 100
test AddTextPropertyL image3 modelPropDef "ModelN"

test AddObjectsL image0 2
test AddObjectsL image2 2

test NewObjectQueryL rootCond defaultNs DistinctValues Image Object

test AddPropertyConditionL modelPropCond rootCond modelPropDef TextCompare BeginsWith N
test AppendOrderRuleL ESortAscending EOrderRuleTypeProperty modelPropDef
test AddPropertyFilterL modelPropDef

test SetObjectQueryResultL { image0 image1 image2 }
test FindL -1 -1
waittestclass test

test RemoveObjectsL KSync KById image0 2
test RemoveObjectsL KSync KById image2 2

[Endtest]

[Test]
title Query 15: objects with freetexts with freetext contains some text
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 4 video objects to DB  
test GetObjectDefL imageObjDef defaultNs Image
test GetObjectDefL videoObjDef defaultNs Video
test GetObjectDefL objDef defaultNs Object
test GetObjectDefL mediaObjDef defaultNs MediaObject

test GetPropertyDefL originPropDef objDef Origin

test GetPropertyDefL creationDatePropDef imageObjDef CreationDate
test GetPropertyDefL lastModDatePropDef imageObjDef LastModifiedDate



test GetPropertyDefL widthPropDef mediaObjDef Width
test GetPropertyDefL heightPropDef mediaObjDef Height
test GetPropertyDefL sizePropDef imageObjDef Size
test GetPropertyDefL modelPropDef imageObjDef Model

test NewObjectL image0 imageObjDef KL
test SetUriL image0 e:\testing\data\TEST_IMAGE16.jpg
test AddTimePropertyL image0 creationDatePropDef 20071130:235959.999999
test AddTimePropertyL image0 lastModDatePropDef 20081130:235959.999999
test AddUint32PropertyL image0 sizePropDef 999999
test AddUint8PropertyL image0 originPropDef ECamera
test AddUint16PropertyL image0 widthPropDef 200
test AddUint16PropertyL image0 heightPropDef 100

test AddFreeTextL image0 cat

test NewObjectL image1 imageObjDef KL
test SetUriL image1 e:\testing\data\TEST_IMAGE17.jpg
test AddTimePropertyL image1 creationDatePropDef 20081130:235959.999999
test AddTimePropertyL image1 lastModDatePropDef 20090000:000000.000000
test AddUint32PropertyL image1 sizePropDef 999999
test AddUint8PropertyL image1 originPropDef EDownloaded
test AddUint16PropertyL image1 widthPropDef 200
test AddUint16PropertyL image1 heightPropDef 100

test AddFreeTextL image1 cata

test NewObjectL image2 imageObjDef KL
test SetUriL image2 e:\testing\data\TEST_IMAGE18.jpg
test AddTimePropertyL image2 creationDatePropDef 20080001:000000.000000
test AddTimePropertyL image2 lastModDatePropDef 20090000:000000.000001
test AddUint32PropertyL image2 sizePropDef 999999
test AddUint8PropertyL image2 originPropDef ESideLoaded
test AddUint16PropertyL image2 widthPropDef 200
test AddUint16PropertyL image2 heightPropDef 100

test AddFreeTextL image2 acat

test NewObjectL image3 imageObjDef KL
test SetUriL image3 e:\testing\data\TEST_IMAGE39.jpg
test AddTimePropertyL image3 creationDatePropDef 20091130:235959.999999
test AddTimePropertyL image3 lastModDatePropDef 20091130:235959.999999
test AddUint32PropertyL image3 sizePropDef 999999
test AddUint8PropertyL image3 originPropDef EDownloaded
test AddUint16PropertyL image3 widthPropDef 200
test AddUint16PropertyL image3 heightPropDef 100

test AddFreeTextL image3 TestFreeText3

test AddObjectsL image0 4


test NewObjectQueryL rootCond defaultNs ObjectWithFreetexts Object Object
test AddObjectConditionL objCond rootCond ObjectConditionCompare FreeTextContains cat

test SetObjectQueryResultL { image0 image1 image2 }
test FindL -1 -1
waittestclass test

test RemoveObjectsL KSync KById image0 2
test RemoveObjectsL KSync KById image2 2


[Endtest]

[Test]
title Query 16: 5 newest objects, sort by creation date, limit to 5
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 6 image objects and 1 video object to DB
test GetObjectDefL imageObjDef defaultNs Image
test GetObjectDefL videoObjDef defaultNs Video
test GetObjectDefL objDef defaultNs Object
test GetObjectDefL mediaObjDef defaultNs MediaObject

test GetPropertyDefL originPropDef objDef Origin

test GetPropertyDefL creationDatePropDef imageObjDef CreationDate
test GetPropertyDefL lastModDatePropDef imageObjDef LastModifiedDate



test GetPropertyDefL widthPropDef mediaObjDef Width
test GetPropertyDefL heightPropDef mediaObjDef Height
test GetPropertyDefL sizePropDef imageObjDef Size
test GetPropertyDefL modelPropDef imageObjDef Model

test NewObjectL image0 imageObjDef KL
test SetUriL image0 e:\testing\data\TEST_IMAGE16.jpg
test AddTimePropertyL image0 creationDatePropDef 20171130:235959.999999
test AddTimePropertyL image0 lastModDatePropDef 20081130:235959.999999
test AddUint32PropertyL image0 sizePropDef 999999
test AddUint8PropertyL image0 originPropDef ECamera
test AddUint16PropertyL image0 widthPropDef 200
test AddUint16PropertyL image0 heightPropDef 100
test AddTextPropertyL image0 modelPropDef "NModel"
test AddFreeTextL image0 cat

test NewObjectL image1 imageObjDef KL
test SetUriL image1 e:\testing\data\TEST_IMAGE17.jpg
test AddTimePropertyL image1 creationDatePropDef 20181130:235959.999999
test AddTimePropertyL image1 lastModDatePropDef 20090000:000000.000000
test AddUint32PropertyL image1 sizePropDef 999999
test AddUint8PropertyL image1 originPropDef EDownloaded
test AddUint16PropertyL image1 widthPropDef 200
test AddUint16PropertyL image1 heightPropDef 100
test AddTextPropertyL image1 modelPropDef "NModel"
test AddFreeTextL image1 cata

test NewObjectL image2 imageObjDef KL
test SetUriL image2 e:\testing\data\TEST_IMAGE18.jpg
test AddTimePropertyL image2 creationDatePropDef 20180001:000000.000000
test AddTimePropertyL image2 lastModDatePropDef 20090000:000000.000001
test AddUint32PropertyL image2 sizePropDef 999999
test AddUint8PropertyL image2 originPropDef ESideLoaded
test AddUint16PropertyL image2 widthPropDef 200
test AddUint16PropertyL image2 heightPropDef 100
test AddTextPropertyL image2 modelPropDef "NModel"
test AddFreeTextL image2 acat

test NewObjectL image3 imageObjDef KL
test SetUriL image3 e:\testing\data\TEST_IMAGE39.jpg
test AddTimePropertyL image3 creationDatePropDef 20191130:235959.999999
test AddTimePropertyL image3 lastModDatePropDef 20091130:235959.999999
test AddUint32PropertyL image3 sizePropDef 999999
test AddUint8PropertyL image3 originPropDef EDownloaded
test AddUint16PropertyL image3 widthPropDef 200
test AddUint16PropertyL image3 heightPropDef 100
test AddTextPropertyL image3 modelPropDef "ModelN"
test AddFreeTextL image3 TestFreeText3

test NewObjectL image4 imageObjDef KL
test SetUriL image4 e:\testing\data\TEST_IMAGE49.jpg
test AddTimePropertyL image4 creationDatePropDef 20191130:235959.999999
test AddTimePropertyL image4 lastModDatePropDef 20091130:235959.999999
test AddUint32PropertyL image4 sizePropDef 999999
test AddUint8PropertyL image4 originPropDef EDownloaded
test AddUint16PropertyL image4 widthPropDef 200
test AddUint16PropertyL image4 heightPropDef 100
test AddTextPropertyL image4 modelPropDef "ModelN"
test AddFreeTextL image4 TestFreeText3

test NewObjectL image5 imageObjDef KL
test SetUriL image5 e:\testing\data\TEST_IMAGE59.jpg
test AddTimePropertyL image5 creationDatePropDef 20161130:235959.999999
test AddTimePropertyL image5 lastModDatePropDef 20091130:235959.999999
test AddUint32PropertyL image5 sizePropDef 999999
test AddUint8PropertyL image5 originPropDef EDownloaded
test AddUint16PropertyL image5 widthPropDef 200
test AddUint16PropertyL image5 heightPropDef 100
test AddTextPropertyL image5 modelPropDef "ModelN"
test AddFreeTextL image5 TestFreeText3


test GetPropertyDefL durationPropDef videoObjDef Duration

test NewObjectL video0 videoObjDef KL
test SetUriL video0 e:\testing\data\TEST_VIDEO16.mp4
test AddTimePropertyL video0 creationDatePropDef 20181130:235959.999999
test AddTimePropertyL video0 lastModDatePropDef 20081130:235959.999999
test AddReal32PropertyL video0 durationPropDef 30
test AddUint32PropertyL video0 sizePropDef 999999

test AddObjectsL image0 6
test AddObjectsL video0 1

test NewObjectQueryL rootCond defaultNs ObjectWithFreetexts Object Object
test AppendOrderRuleL ESortDescending EOrderRuleTypeProperty creationDatePropDef

test SetObjectQueryResultL { image1 image2 image3 image4 video0 }
test FindL 5 -1
waittestclass test

test RemoveObjectsL KSync KById image0 6
test RemoveObjectsL KSync KById video0 1
[Endtest]

[Test]
title Query 17: all Played events, which belongs to object with some ID
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj0 000013 000001
test AddObjectL obj0

test NewObjectL obj1 videoObjDef KL
test AddTimePropertyL obj1 creationDatePropDef0 20081130:235959.999999
test AddTimePropertyL obj1 lastModDatePropDef0 20081130:235959.999999
test SetGuidL EObject obj1 000013 000002
test AddObjectL obj1

test GetEventDefL createdEventDef defaultNs Created
test NewEventL event0 obj0 createdEventDef TestSource TestParticipant 20081130:235959.999999 KL
test GetEventDefL deletedEventDef defaultNs Deleted
test NewEventL event1 obj0 deletedEventDef TestSource TestParticipant 20081130:235959.999999 KLC
test GetEventDefL playedEventDef defaultNs Played
test NewEventL event2 obj0 playedEventDef TestSource TestParticipant 20081130:235959.999999 KL
test NewEventL event3 obj1 playedEventDef TestSource TestParticipant 20081130:235959.999999 KLC
test GetEventDefL editedEventDef defaultNs Edited
test NewEventL event4 obj1 editedEventDef TestSource TestParticipant 20081130:235959.999999 KL
test GetEventDefL sentEventDef defaultNs Sent
test NewEventL event5 obj1 sentEventDef TestSource TestParticipant 20081130:235959.999999 KLC
test GetEventDefL receivedEventDef defaultNs Received
test NewEventL event6 obj1 receivedEventDef TestSource TestParticipant 20081130:235959.999999 KL
loop 7
test BelongsToSessionL EEvent LOOP_COUNTER EFalse
test InDatabaseL EEvent LOOP_COUNTER EFalse
test AddEventL LOOP_COUNTER
test BelongsToSessionL EEvent LOOP_COUNTER ETrue
test SessionL EEvent LOOP_COUNTER
test InDatabaseL EEvent LOOP_COUNTER ETrue
endloop


test NewEventQueryL rootCond defaultNs Item

test AddEventConditionL eventCond rootCond EventDef Played
test ObjectConditionsL objectCondition eventCond
test AddObjectConditionL objCond objectCondition Object obj1 1

test SetEventQueryResultL { event3 }
test FindL -1 -1
waittestclass test

test RemoveEventsL KSync event0 3
request EEventsAsyncRemoved
test RemoveEventsL KAsync event3 4
wait EEventsAsyncRemoved
release EEventsAsyncRemoved
test RemoveObjectL obj0 KById
test RemoveObjectL obj1 KById
delete test
[Endtest]

[Test]
title Query 18: all IsVersionOf relations, which belongs to video objects and parameter is not equal to 
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 4 video objects to DB  
test GetObjectDefL videoObjDef defaultNs Video
test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\TEST_VIDEO12.mp4
test GetPropertyDefL creationDatePropDef0 videoObjDef CreationDate
test AddTimePropertyL obj0 creationDatePropDef0 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef0 videoObjDef LastModifiedDate
test AddTimePropertyL obj0 lastModDatePropDef0 20081130:235959.999999
test NewObjectL obj1 videoObjDef KL
test SetUriL obj1 e:\testing\data\TEST_VIDEO13.mp4
test GetPropertyDefL creationDatePropDef1 videoObjDef CreationDate
test AddTimePropertyL obj1 creationDatePropDef1 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef1 videoObjDef LastModifiedDate
test AddTimePropertyL obj1 lastModDatePropDef1 20081130:235959.999999
test NewObjectL obj2 videoObjDef KL
test SetUriL obj2 e:\testing\data\TEST_VIDEO14.mp4
test GetPropertyDefL creationDatePropDef2 videoObjDef CreationDate
test AddTimePropertyL obj2 creationDatePropDef2 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef2 videoObjDef LastModifiedDate
test AddTimePropertyL obj2 lastModDatePropDef2 20081130:235959.999999
test NewObjectL obj3 videoObjDef KL
test SetUriL obj3 e:\testing\data\TEST_VIDEO15.mp4
test GetPropertyDefL creationDatePropDef3 videoObjDef CreationDate
test AddTimePropertyL obj3 creationDatePropDef3 20081130:235959.999999
test GetPropertyDefL lastModDatePropDef3 videoObjDef LastModifiedDate
test AddTimePropertyL obj3 lastModDatePropDef3 20081130:235959.999999
test AddObjectsL obj0 4

test GetRelationDefL relDefContains defaultNs Contains
test GetRelationDefL isVersionOfRelDef defaultNs IsVersionOf
test NewRelationL rel0 obj0 isVersionOfRelDef obj1 1 KL
test NewRelationL rel1 obj0 isVersionOfRelDef obj2 1 KL
test NewRelationL rel2 obj2 isVersionOfRelDef obj3 0 KLC
loop 3
test AddRelationL LOOP_COUNTER
endloop

// Query
test NewRelationQueryL rootCond defaultNs Item Video Object

test AddRelationConditionL isVersionOfRelCond rootCond Left RelationDefRange IsVersionOf NotEqual 0 0

test LeftL leftRelCond isVersionOfRelCond
test AddObjectConditionL objCond leftRelCond ObjectDef Video

test SetRelationQueryResultL { rel0 rel1 }
test FindL -1 -1
waittestclass test

test RemoveRelationsL KSync rel0 3
test RemoveObjectsL KSync KById obj0 4
delete test
[Endtest]

[Test]
title Query 19: query the videos that are modified in the last 30 seconds
create MdETestScripter test
waittestclass test
test GetDefaultNamespaceDefL defaultNs
// Add 3 video objects to DB
test GetObjectDefL videoObjDef defaultNs Video

test GetPropertyDefL creationDatePropDef videoObjDef CreationDate
test GetPropertyDefL lastModDatePropDef videoObjDef LastModifiedDate

test NewObjectL obj0 videoObjDef KL
test SetUriL obj0 e:\testing\data\TEST_VIDEO19_1.mp4
test AddTimePropertyL obj0 creationDatePropDef 20090101:000000.000000
test AddTimePropertyL obj0 lastModDatePropDef 20090809:115000.000000

test NewObjectL obj1 videoObjDef KL
test SetUriL obj1 e:\testing\data\TEST_VIDEO19_2.mp4
test AddTimePropertyL obj1 creationDatePropDef 20090101:000000.000000
test AddTimePropertyL obj1 lastModDatePropDef 20090808:115000.000000

test NewObjectL obj2 videoObjDef KL
test SetUriL obj2 e:\testing\data\TEST_VIDEO19_3.3gp
test AddTimePropertyL obj2 creationDatePropDef 20090101:000000.000000
test AddTimePropertyL obj2 lastModDatePropDef 20090809:115020.000000

test AddObjectsL obj0 3

test NewObjectQueryL rootCond defaultNs Item Video Object
test AddPropertyConditionL propCond rootCond lastModDatePropDef TimeRange Between 20090809:115000.000000 20090809:115030.000000

test SetObjectQueryResultL { obj0 obj2 }
test FindL -1 -1
waittestclass test

test RemoveObjectsL KSync KById obj0 3
delete test
[Endtest]

// [Test]
// title Query : TestPopulateDbL
// create MdETestScripter test
// waittestclass test
// test TestPopulateDbL
// waittestclass test
// [Endtest]
